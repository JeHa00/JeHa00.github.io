<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>클린 코드, 이제는 파이썬이다: Find code smell | Jeha DevLog</title><meta name=keywords content="TIL,Book Study"><meta name=description content="code smell(코드 악취)이 나는 부분들에는 무엇이 있고, 이를 어떻게 해결해야하는지에 대해 알아본다."><meta name=author content><link rel=canonical href=http://jeha00.github.io/post/bookstudy/pythoncleancode/chapter05_findingcodesmell/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.268b216eea772711d318d156ce02a8190962367a0bf469fa9a959114ea6b9ca3.css integrity="sha256-Joshbup3JxHTGNFWzgKoGQliNnoL9Gn6mpWRFOprnKM=" rel="preload stylesheet" as=style><link rel=icon href=http://jeha00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://jeha00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://jeha00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=http://jeha00.github.io/apple-touch-icon.png><link rel=mask-icon href=http://jeha00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="클린 코드, 이제는 파이썬이다: Find code smell"><meta property="og:description" content="code smell(코드 악취)이 나는 부분들에는 무엇이 있고, 이를 어떻게 해결해야하는지에 대해 알아본다."><meta property="og:type" content="article"><meta property="og:url" content="http://jeha00.github.io/post/bookstudy/pythoncleancode/chapter05_findingcodesmell/"><meta property="og:image" content="http://jeha00.github.io/47"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-12-24T14:09:21+09:00"><meta property="article:modified_time" content="2022-12-24T14:09:21+09:00"><meta property="og:site_name" content="JeHa00 DevLog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://jeha00.github.io/47"><meta name=twitter:title content="클린 코드, 이제는 파이썬이다: Find code smell"><meta name=twitter:description content="code smell(코드 악취)이 나는 부분들에는 무엇이 있고, 이를 어떻게 해결해야하는지에 대해 알아본다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://jeha00.github.io/post/"},{"@type":"ListItem","position":2,"name":"클린 코드, 이제는 파이썬이다: Find code smell","item":"http://jeha00.github.io/post/bookstudy/pythoncleancode/chapter05_findingcodesmell/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"클린 코드, 이제는 파이썬이다: Find code smell","name":"클린 코드, 이제는 파이썬이다: Find code smell","description":"code smell(코드 악취)이 나는 부분들에는 무엇이 있고, 이를 어떻게 해결해야하는지에 대해 알아본다.","keywords":["TIL","Book Study"],"articleBody":"0. Introduction 아래 book study는 알 스웨이가트가 지었고, 박재호님이 번역하신 클린 코드, 이제는 파이썬이다. 를 읽고 진행한 book study 입니다. 영문 원본으로 온라인 공개된 자료가 있어서 영문으로 학습합니다.\n기존에 읽었던 Clean Code는 자바 코드로 되어 있어서, 먼저 파이썬 클린 코드를 학습 후 시작할려고 합니다.\n이번 book study를 진행하면서 code에 대한 철학이 생기고, code를 바라보는 눈이 깊어지고, 넓어지기를 바랍니다.\n각 chapter를 읽고 내용 정리하는 식으로 진행합니다.\n이번에 학습하는 chapter의 주제는 ‘Chapter 05: Finding Code Smells’ 입니다.\ncode smell: 1) 복사 붙여넣기한 코드 중복되는 코드 부분이 많아지고 길어질수록, 중복 제거를 더 해야합니다.\n저자는 프로그램에 3 ~ 4개의 사본이 있다면 코드 중복 제거를 고려하기 시작한다고 한다.\n중복 코드는 한 부분을 수정하면 다른 복사 붙여넣기한 코드도 수정해야한다.\n복사 붙여넣기한 모든 코드 부분을 다 수정하면 좋겠지만, 한 부분만 수정하고 나머지 수정하는 걸 잊을 수도 있고, 한 부분만 놓쳐서 error를 발생할 수 있다.\n그래서 더욱 함수로 만들어야 한다.\n아래는 중복 코드가 많은 잘못된 예시다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # Bad case print('Good morning!') print('How are you feeling?') feeling = input() print('I am happy to hear that you are feeling' + feeling) print('Good afternoon!') print('How are you feeling?') feeling = input() print('I am happy to hear that you are feeling' + feeling) print('Good evening!') print('How are you feeling?') feeling = input() print('I am happy to hear that you are feeling' + feeling) 해결책: 함수화 아래는 위 잘못된 케이스를 개선한 예시다.\n1 2 3 4 5 6 7 8 9 10 11 12 # Good case def ask_feeling(): print('How are you feeling?') feeling = input() print('I am happy to hear that you are feeling' + feeling) print('Good morning!') ask_feeling() print('Good afternoon!') ask_feeling() print('Good evening!') ask_feeling() 다시 위 코드를 개선해보자.\n1 2 3 for time_of_day in ['morning', 'afternoon', 'evening'] print(f'Good {time_of_day} !') ask_feeling() 이처럼 코드를 더 적은 수로, 목적이 확실하게, 유지보수성이 좋게 바꿀 수 있다.\ncode smell: 2) 의도가 드러나지 않은 값들 코드를 보면 뜬끔없이 숫자(magic number)나, 문자열이 나타나질 때가 있다.\n의도, 목적이 명확하게 드러나지 않는 부분 또한 code smell이 나는 부분이다.\n해결책: 숫자를 상수로 사용하기 숫자를 숫자로 그대로 사용하면 몇 달 후, 작성자가 다시 볼 때나 다른 사람이 볼 때 이 숫자의 의미를 알 수 없다.\n1 2 # Bad case expiration = time.time() + 604800 그래서 이를 옆에 주석을 달아서 다음과 같이 작성할 수 있지만, 이보다는 상수 변수로 사용하는 게 더 좋은 방식이다.\n1 2 3 4 5 6 7 8 9 10 # Bad case expiration = time.time() + 604800 # Expire in one week # Good case SECONDS_PER_MINUTE = 60 SECONDS_PER_HOUR = 60 * SECONDS_PER_MINUTE SECONDS_PER_DAY = 24 * SECONDS_PER_HOUR SECONDS_PER_WEEK = 7 * SECONDS_PER_DAY expiration = time.time() + SECONDS_PER_WEEK 이 방식으로 작성했을 때, 또 다른 장점을 예시를 들어 언급해보겠다.\n이렇게 동일한 값이어도 다른 상수로 구분했을 경우, NUM_CARDS_IN_DECK 를 수정해도 NUM_WEEKS_IN_YEAR 에 영향을 주지 않는다.\n1 2 3 4 5 6 # Good case NUM_CARDS_IN_DECK = 52 NUM_WEEKS_IN_YEAR = 52 print('This deck contains', NUM_CARDS_IN_DECK, 'cards.') print('The 2-year contract lasts for', 2 * NUM_WEEKS_IN_YEAR, 'weeks.') 해결책: 문자열을 상수로 사용하기 문자열로 입력을 하면 이 문자열이 무슨 목적과 의도를 가지는지 모른다. 그렇다고 변수로 입력하면 undefind 가 뜬다.\n아래 코드를 예를 들어 설명해보자.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 NORTH = 'north' SOUTH = 'south' EAST = 'east' WEST = 'west' while True: print('태양광 패널 방향을 정해라.') direction = input().lower() if direction in (NORTH, SOUTH, EAST, WEST): break print(f'태양광 패널의 방향은 {direction} 이다.') # Bad case 1 if direction == 'nrth': print('북쪽을 바라보는 것은 효율적이지 않다.') # Bad case 2 if direction == NRTH: print('북쪽을 바라보는 것은 효율적이지 않다.') 아래처럼 direction == 'nrth' 로 입력하면 'nrth' 가 무엇을 의미하는지 모르고, NRTH로 입력하면 undefined가 뜬다.\ncode smell: 3) 죽은 코드 죽은 코드란? 코드를 일시적으로 주석 처리하는 방식이 테스트 과정에서 흔히 사용된다.\n그런데, 주석 처리된 코드가 그대로 남아있으면, 왜 주석처리되었는지 모르는 상태가 된다.\n또한, 항상 false 조건인 if block이나, 절대 호출되지 않는 함수 등\n작성한 의미가 없는 코드 를 모두 죽은 코드 라고 한다.\n1 2 3 4 5 6 7 8 9 import random def coinFlip(): if random.randint(0, 1): return 'Heads!' else: return 'Tails!' return 'The coin landed on its edge!' print(coinFlip) 위 실행에서 맨 마지막 줄인 return 'The coin landed on its edge!'은 실행되지 않는 코드다. 이것이 바로 죽은 코드다.\n죽은 코드의 예외: stub stub 이란 함수가 아직 호출될 준비가 되지 않은 것을 보여주는 코드 다.\n다음과 같이 함수가 실행될 때 error가 발생하지 않도록 아무 작업도 수행하지 않는 pass문이나, raise NotImplemnetedError 로 stub을 걸 수 있다.\n1 2 3 4 5 def example_function(): pass def example_function(): raise NotImplementedError code smell: 4) 숫자 접미사가 붙은 변수 숫자 접미사가 붙은 변수를 사용하지 말고, 그 변수가 3개 이상일 경우 collection을 사용하자\n이 부분은 이전에 학습한 Chapter 04의 naming에도 해당된다.\n숫자 접미사가 붙은 변수란 password1, password2, pet1Name, pet2Name, pet3Name 처럼 접미사로 숫자가 붙은 것 뿐만 아니라 숫자로 구분된 변수를 의미한다.\n이렇게 작성하면 변수들 간의 차이점을 알 수 없다.\n그래서 변수마다 고유한 이름을 작성하자.\n좌표계 개념을 변수에 도입하고 싶으면 x1, x2, y1, y2가 아니라 start_x, end_x, start_y, end_y 로 작성하자.\n숫자 접미사가 3개 이상인 경우 각 데이터를 독립적인 변수에 담는 것이 아닌 list, set, dictionary 같은 collection으로 저장 하자.\n1 2 3 4 5 6 7 8 # Bad case pet1Name = 'one' pet2Name = 'two' pet3Name = 'three' # Good case petNames = ['one', 'two', 'three'] petNames = {'one', 'two', 'three'} 예외: 숫자가 고유 이름의 일부일 경우 enableIPv6 인 경우, IPv6는 고유 이름으로 상관없다.\ncode smell: 5) 그냥 함수나 모듈이어야하는 클래스 일회성 함수를 만들 때는 클래스 메서드를 만들지 말자.\n일회성 함수를 만들 때는 클래스를 사용하지 않는다.\n그리고, 함수를 그룹화할 때는 클래스가 아닌 모듈을 사용한다.\n클래스로 잘못만든 함수의 예시를 보자.\n1 2 3 4 5 6 7 8 9 10 import random class Dice: def __init__(self, sides=6): self.sides = sides def roll(self): return random.randint(1, self.sides) a = Dice() print(a.roll()) 이 클래스는 사실 아래 함수와 같다.\n1 print(random.randint(1, 6)) 클래스 작성에 대한 객체지향 설계 원칙은 Chapter 15 ~ 17을 참고하자.\ncode smell: 6) 중첩된 list comprehension 중첩 list를 만들 때는 ‘가독성’을 위해서 list comprehension 하나에 for 루프문을 사용하여 만들자\n여러 종류의 comprehension 파이썬에는 list comprehension 외에도 set comprehension, dictionary comprehension이 존재한다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 # list comprehension 사용 x span = [] for number in range(100): if number % 5 != 0: span.append(str(number)) # list comprehension 사용 o span = [str(number) for number in range(100) if number % 5 != 0] # set comprehension span = {str(number) for number in range(100) if number % 5 != 0} # dictionary comprehension span = {str(number): number for number in range(100) if number % 5 !=0} list comprehension을 사용하여 중첩 리스트 만들기 또한 중첩 리스트를 list comprehension으로 생성할 수 있다.\n1 2 3 # nested list comprehension nested_int_list = [[0, 1, 2, 3], [4], [5, 6], [7, 8, 9]] nested_str_list = [[str(i) for i in sublist] for sublist in nested_int_list] 중첩 리스트 생성 시, 가독성 향상시키는 방법 하지만 이 코드는 가독성이 좋지 않기 때문에, 중첩 리스트를 생성할 때는 for 루프문을 하나 이상 사용해서 기존의 리스트 컴프리헨션을 확장하는 게 낫다.\n1 2 3 4 5 6 7 8 nested_int_list = [[0, 1, 2, 3], [4], [5, 6], [7, 8, 9]] nested_str_list = [] for sublist in nested_int_list: nested_str_list.append([str(i) for i in sublist]) # 결과 \u003e\u003e\u003e nested_str_list [['0', '1', '2', '3'], ['4'], ['5', '6'], ['7', '8', '9']] code smell: 7) 빈 예외 처리 블록과 부실한 에러 메시지 해당 코드를 사용하는 사용자가 조치를 어떻게 취하라는 에러 메시지를 가진 예외 처리 블록을 만들자. 프로그램에서 발생할 수 있는 모든 예외를 처리하지 않으면 프로그램 개발은 완료된 것이 아니다.\n빈 예외처리 블록 예외 처리 블록(except)이 없으면 파이썬 프로그램은 즉시 멈추면서 충돌을 일으켜서 저장되지 않은 작업이 손실되거나, 파일이 반만 완료된 상태로 남아 있을 수 있다.\n그래서 개발자들은 이 부분을 비어있지 않도록 만들기 위해서 다음과 같이 작성하는 경우가 있다.\n1 2 3 4 5 try: num = input('Enter a number: ') num = int(num) except ValueError: pass 이는 except 블록이 존재하지만 사실상 예외 처리를 하지 않는 것이다. 이렇게 프로그램이 넘어가면 에러를 처리하기보다는 감춰 버려서 더 심각한 버그가 만들어질 수 있다.\n부실한 에러 메세지 그래서 다음과 같이 수정해보자.\n1 2 3 4 5 try: num = input('Enter a number: ') num = int(num) except ValueError: print('An incorrect value was passed to int()') 구체적인 문제 상황을 알 수 있지만, 사용자가 어떻게 할 수 있는 게 아니다. 이보다는 사용자가 여기서 무엇을 어떻게 해야할지를 설명하는 게 더 성숙한 코드라고 생각한다.\n그래서 print('You have to input a number') 로 하는 게 더 낫다고 판단된다.\nDebug debug 시에 많은 사람들이 디버깅 정보를 출려갛기 위해 print() 호출을 사용한다.\n쉬운 방법이지만, 장기적으로 버그를 진단하기 위해서는 debugger와 log에 의존하는 게 더 빠르다.\ncode smell에 관한 잘못된 통념 code smell(코드 악취)인 줄 알았지만, 사실 아닌 것들에 대해 정리해본다.\n함수 마지막에는 return 문이 하나만 있여야 한다? 하나의 입구, 하나의 출구라는 아이디어는 어셈블리어 언어와 포트란 언어로 프로그래밍하던 시절에 나온 조언을 잘못 해석한데에서 비롯된다.\n함수나 메소드마다 return 문을 하나씩만 유지하려면, 여러 개의 if-else 문으로 작성되어 분기처리하기 때문에 return 문이 둘 이상 있어도 괜찮다.\n함수에는 try 문이 둘 이상 있으면 안된다? 함수와 메서드는 한 가지일만 해야하는 건 맞지만, 예외 처리도 별도의 함수에서 발생해야 한다는 의미는 아니다.\n별도의 함수에서 발생해야한다는 사람들은 아래 코드를 다음과 같이 수정해야 한다고 말한다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # before import os def deleteWithConfirmation(filename): try: if (input('Delete' + filename + ', are you sure ? Y/N') == 'Y'): os.unlink(filename) except FileNotFoundError: print('That file already did not exist.') # after import os def handleErrorForDeleteWithConfirmation(filename): try: _deleteWithConfirmation(filename) except FileNotFoundError: print('That file already did not exist.') def _deleteWithConfirmation(filename): if input('Delete' + filename + ', are you sure ? Y/N') == 'Y'\" os.unlink(filename) 위와 같이 함수로 ‘한 가지 일’에 집중하여 나눴지만, 오히려 복잡하다.\n이 ‘일’을 어떻게 정의해야할지 생각해보자.\n플래그 인수는 나쁘다? 플래그 인수 란 함수 또는 메소드 호출의 boolean 인수를 말한다.\n이 플래그 인수는 다음과 같이 사용된다.\n1 2 3 4 5 def someFunction(flagArgument): if flagArgument: # 특정 코드 실행 else: # 완전히 다른 특정 코드 실행 이 값이 True냐 false이냐에 따라서 다르게 작동한다.\n이 인수를 사용하는 예가 sorted() 다. reverse 키워드 인자에 boolean 값을 전달해서 정렬 순서를 정할 수 있다.\n그런데 왜 플래그 인수를 code smell로 여길까?\n이 값에 따라 실행되는 내용이 달라서 2개의 함수를 만들어야 한다는 통념 때문이다.\n오히려 2개의 함수로 나누면 더 복잡해진다.\n전역 변수는 나쁘다? 함수와 메서드가 전역 변수를 사용한다면 변수가 잊혀지는 격리 기능을 일부 잃어버린다.\n이 격리 기능으로 올바르게 작동될 수도 있다.\n하지만, 이 전역 변수를 많이 사용하면 인수가 많아져서 복잡도가 높아지듯이 복잡해지고, 버그 발생 가능성도 높아진다.\n이 전역 변수를 사용하는 함수에서 에러가 발생됬을 경우 프로그램 전체에서 다 찾아봐야하기 때문에 전역 변수 사용을 권장하지 않는다.\n하지만 이 책에서 말하고 싶은 건 ‘모든’ 전역 변수는 나쁜 아니라는 사실이다.\n주석은 불필요하다? 이런 주장이 나온 이유는 나쁜 주석이 달린 코드는 주석이 전혀 없는 것보다 더 나쁘기 때문이다.\n하지만, 주석을 간결하고 효과적으로 작성한다면 훨씬 도움이 된다.\n실제 프로그램에서는 주석이 너무 많거나 잘못된 주석이 문제라기보다는 주석이 아예 없거나 부족한 경우가 대부분이다.\n주석을 효과적으로 작성하는 방법은 Chapter 10에서 학습한다.\nReference 클린 코드, 이제는 파이썬이다. ","wordCount":"1812","inLanguage":"en","datePublished":"2022-12-24T14:09:21+09:00","dateModified":"2022-12-24T14:09:21+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://jeha00.github.io/post/bookstudy/pythoncleancode/chapter05_findingcodesmell/"},"publisher":{"@type":"Organization","name":"Jeha DevLog","logo":{"@type":"ImageObject","url":"http://jeha00.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://jeha00.github.io/ accesskey=h title="@Jeha00 (Alt + H)">@Jeha00</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=http://jeha00.github.io/me/ title=About><span>About</span></a></li><li><a href=http://jeha00.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=http://jeha00.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://jeha00.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://jeha00.github.io/>Home</a>&nbsp;»&nbsp;<a href=http://jeha00.github.io/post/>Posts</a></div><h1 class=post-title>클린 코드, 이제는 파이썬이다: Find code smell</h1><div class=post-meta>Book Study&nbsp;·&nbsp;<span title='2022-12-24 14:09:21 +0900 KST'>December 24, 2022</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#0-introduction aria-label="0. Introduction">0. Introduction</a></li><li><a href=#code-smell-1-%eb%b3%b5%ec%82%ac-%eb%b6%99%ec%97%ac%eb%84%a3%ea%b8%b0%ed%95%9c-%ec%bd%94%eb%93%9c aria-label="code smell: 1) 복사 붙여넣기한 코드">code smell: 1) 복사 붙여넣기한 코드</a><ul><li><a href=#%ed%95%b4%ea%b2%b0%ec%b1%85-%ed%95%a8%ec%88%98%ed%99%94 aria-label="해결책: 함수화">해결책: 함수화</a></li></ul></li><li><a href=#code-smell-2-%ec%9d%98%eb%8f%84%ea%b0%80-%eb%93%9c%eb%9f%ac%eb%82%98%ec%a7%80-%ec%95%8a%ec%9d%80-%ea%b0%92%eb%93%a4 aria-label="code smell: 2) 의도가 드러나지 않은 값들">code smell: 2) 의도가 드러나지 않은 값들</a><ul><li><a href=#%ed%95%b4%ea%b2%b0%ec%b1%85-%ec%88%ab%ec%9e%90%eb%a5%bc-%ec%83%81%ec%88%98%eb%a1%9c-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0 aria-label="해결책: 숫자를 상수로 사용하기">해결책: 숫자를 상수로 사용하기</a></li><li><a href=#%ed%95%b4%ea%b2%b0%ec%b1%85-%eb%ac%b8%ec%9e%90%ec%97%b4%ec%9d%84-%ec%83%81%ec%88%98%eb%a1%9c-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0 aria-label="해결책: 문자열을 상수로 사용하기">해결책: 문자열을 상수로 사용하기</a></li></ul></li><li><a href=#code-smell-3-%ec%a3%bd%ec%9d%80-%ec%bd%94%eb%93%9c aria-label="code smell: 3) 죽은 코드">code smell: 3) 죽은 코드</a><ul><li><a href=#%ec%a3%bd%ec%9d%80-%ec%bd%94%eb%93%9c%eb%9e%80 aria-label="죽은 코드란?">죽은 코드란?</a></li><li><a href=#%ec%a3%bd%ec%9d%80-%ec%bd%94%eb%93%9c%ec%9d%98-%ec%98%88%ec%99%b8-stub aria-label="죽은 코드의 예외: stub">죽은 코드의 예외: stub</a></li></ul></li><li><a href=#code-smell-4-%ec%88%ab%ec%9e%90-%ec%a0%91%eb%af%b8%ec%82%ac%ea%b0%80-%eb%b6%99%ec%9d%80-%eb%b3%80%ec%88%98 aria-label="code smell: 4) 숫자 접미사가 붙은 변수">code smell: 4) 숫자 접미사가 붙은 변수</a><ul><li><a href=#%ec%88%ab%ec%9e%90-%ec%a0%91%eb%af%b8%ec%82%ac%ea%b0%80-3%ea%b0%9c-%ec%9d%b4%ec%83%81%ec%9d%b8-%ea%b2%bd%ec%9a%b0 aria-label="숫자 접미사가 3개 이상인 경우">숫자 접미사가 3개 이상인 경우</a></li><li><a href=#%ec%98%88%ec%99%b8-%ec%88%ab%ec%9e%90%ea%b0%80-%ea%b3%a0%ec%9c%a0-%ec%9d%b4%eb%a6%84%ec%9d%98-%ec%9d%bc%eb%b6%80%ec%9d%bc-%ea%b2%bd%ec%9a%b0 aria-label="예외: 숫자가 고유 이름의 일부일 경우">예외: 숫자가 고유 이름의 일부일 경우</a></li></ul></li><li><a href=#code-smell-5-%ea%b7%b8%eb%83%a5-%ed%95%a8%ec%88%98%eb%82%98-%eb%aa%a8%eb%93%88%ec%9d%b4%ec%96%b4%ec%95%bc%ed%95%98%eb%8a%94-%ed%81%b4%eb%9e%98%ec%8a%a4 aria-label="code smell: 5) 그냥 함수나 모듈이어야하는 클래스">code smell: 5) 그냥 함수나 모듈이어야하는 클래스</a></li><li><a href=#code-smell-6-%ec%a4%91%ec%b2%a9%eb%90%9c-list-comprehension aria-label="code smell: 6) 중첩된 list comprehension">code smell: 6) 중첩된 list comprehension</a><ul><li><a href=#%ec%97%ac%eb%9f%ac-%ec%a2%85%eb%a5%98%ec%9d%98-comprehension aria-label="여러 종류의 comprehension">여러 종류의 comprehension</a></li><li><a href=#list-comprehension%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-%ec%a4%91%ec%b2%a9-%eb%a6%ac%ec%8a%a4%ed%8a%b8-%eb%a7%8c%eb%93%a4%ea%b8%b0 aria-label="list comprehension을 사용하여 중첩 리스트 만들기">list comprehension을 사용하여 중첩 리스트 만들기</a></li><li><a href=#%ec%a4%91%ec%b2%a9-%eb%a6%ac%ec%8a%a4%ed%8a%b8-%ec%83%9d%ec%84%b1-%ec%8b%9c-%ea%b0%80%eb%8f%85%ec%84%b1-%ed%96%a5%ec%83%81%ec%8b%9c%ed%82%a4%eb%8a%94-%eb%b0%a9%eb%b2%95 aria-label="중첩 리스트 생성 시, 가독성 향상시키는 방법">중첩 리스트 생성 시, 가독성 향상시키는 방법</a></li></ul></li><li><a href=#code-smell-7-%eb%b9%88-%ec%98%88%ec%99%b8-%ec%b2%98%eb%a6%ac-%eb%b8%94%eb%a1%9d%ea%b3%bc-%eb%b6%80%ec%8b%a4%ed%95%9c-%ec%97%90%eb%9f%ac-%eb%a9%94%ec%8b%9c%ec%a7%80 aria-label="code smell: 7) 빈 예외 처리 블록과 부실한 에러 메시지">code smell: 7) 빈 예외 처리 블록과 부실한 에러 메시지</a><ul><li><a href=#%eb%b9%88-%ec%98%88%ec%99%b8%ec%b2%98%eb%a6%ac-%eb%b8%94%eb%a1%9d aria-label="빈 예외처리 블록">빈 예외처리 블록</a></li><li><a href=#%eb%b6%80%ec%8b%a4%ed%95%9c-%ec%97%90%eb%9f%ac-%eb%a9%94%ec%84%b8%ec%a7%80 aria-label="부실한 에러 메세지">부실한 에러 메세지</a></li></ul></li><li><a href=#debug aria-label=Debug>Debug</a></li><li><a href=#code-smell%ec%97%90-%ea%b4%80%ed%95%9c-%ec%9e%98%eb%aa%bb%eb%90%9c-%ed%86%b5%eb%85%90 aria-label="code smell에 관한 잘못된 통념">code smell에 관한 잘못된 통념</a><ul><li><a href=#%ed%95%a8%ec%88%98-%eb%a7%88%ec%a7%80%eb%a7%89%ec%97%90%eb%8a%94-return-%eb%ac%b8%ec%9d%b4-%ed%95%98%eb%82%98%eb%a7%8c-%ec%9e%88%ec%97%ac%ec%95%bc-%ed%95%9c%eb%8b%a4 aria-label="함수 마지막에는 return 문이 하나만 있여야 한다?">함수 마지막에는 return 문이 하나만 있여야 한다?</a></li><li><a href=#%ed%95%a8%ec%88%98%ec%97%90%eb%8a%94-try-%eb%ac%b8%ec%9d%b4-%eb%91%98-%ec%9d%b4%ec%83%81-%ec%9e%88%ec%9c%bc%eb%a9%b4-%ec%95%88%eb%90%9c%eb%8b%a4 aria-label="함수에는 try 문이 둘 이상 있으면 안된다?">함수에는 try 문이 둘 이상 있으면 안된다?</a></li><li><a href=#%ed%94%8c%eb%9e%98%ea%b7%b8-%ec%9d%b8%ec%88%98%eb%8a%94-%eb%82%98%ec%81%98%eb%8b%a4 aria-label="플래그 인수는 나쁘다?">플래그 인수는 나쁘다?</a></li><li><a href=#%ec%a0%84%ec%97%ad-%eb%b3%80%ec%88%98%eb%8a%94-%eb%82%98%ec%81%98%eb%8b%a4 aria-label="전역 변수는 나쁘다?">전역 변수는 나쁘다?</a></li><li><a href=#%ec%a3%bc%ec%84%9d%ec%9d%80-%eb%b6%88%ed%95%84%ec%9a%94%ed%95%98%eb%8b%a4 aria-label="주석은 불필요하다?">주석은 불필요하다?</a></li></ul></li><li><a href=#reference aria-label=Reference>Reference</a></li></ul></div></details></div><div class=post-content><h1 id=0-introduction>0. Introduction<a hidden class=anchor aria-hidden=true href=#0-introduction>#</a></h1><ul><li><p>아래 book study는 알 스웨이가트가 지었고, 박재호님이 번역하신 <a href="https://book.interpark.com/product/BookDisplay.do?_method=detail&sc.prdNo=355096830&gclid=Cj0KCQjw166aBhDEARIsAMEyZh4ltxiM-nlGaj3yjPIW82A6l-hPlXjmjBCqtmw6xzqRX8dc8Rk6PFMaAjm9EALw_wcB">클린 코드, 이제는 파이썬이다.</a> 를 읽고 진행한 book study 입니다. 영문 원본으로 온라인 공개된 자료가 있어서 영문으로 학습합니다.</p></li><li><p>기존에 읽었던 Clean Code는 자바 코드로 되어 있어서, 먼저 파이썬 클린 코드를 학습 후 시작할려고 합니다.</p></li><li><p>이번 book study를 진행하면서 code에 대한 철학이 생기고, code를 바라보는 눈이 깊어지고, 넓어지기를 바랍니다.</p></li><li><p>각 chapter를 읽고 내용 정리하는 식으로 진행합니다.</p></li><li><p>이번에 학습하는 chapter의 주제는 <strong>&lsquo;Chapter 05: Finding Code Smells&rsquo;</strong> 입니다.</p></li></ul><p> </p><hr><h1 id=code-smell-1-복사-붙여넣기한-코드>code smell: 1) 복사 붙여넣기한 코드<a hidden class=anchor aria-hidden=true href=#code-smell-1-복사-붙여넣기한-코드>#</a></h1><p>중복되는 코드 부분이 많아지고 길어질수록, 중복 제거를 더 해야합니다.</p><p>저자는 프로그램에 3 ~ 4개의 사본이 있다면 코드 중복 제거를 고려하기 시작한다고 한다.</p><p>중복 코드는 한 부분을 수정하면 다른 복사 붙여넣기한 코드도 수정해야한다.</p><p>복사 붙여넣기한 모든 코드 부분을 다 수정하면 좋겠지만, 한 부분만 수정하고 나머지 수정하는 걸 잊을 수도 있고, 한 부분만 놓쳐서 error를 발생할 수 있다.</p><p>그래서 더욱 함수로 만들어야 한다.</p><p>아래는 중복 코드가 많은 잘못된 예시다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># Bad case</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;Good morning!&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;How are you feeling?&#39;</span>)
</span></span><span style=display:flex><span>feeling <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>input</span>()
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;I am happy to hear that you are feeling&#39;</span> <span style=color:#ff79c6>+</span> feeling)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;Good afternoon!&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;How are you feeling?&#39;</span>)
</span></span><span style=display:flex><span>feeling <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>input</span>()
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;I am happy to hear that you are feeling&#39;</span> <span style=color:#ff79c6>+</span> feeling)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;Good evening!&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;How are you feeling?&#39;</span>)
</span></span><span style=display:flex><span>feeling <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>input</span>()
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;I am happy to hear that you are feeling&#39;</span> <span style=color:#ff79c6>+</span> feeling)
</span></span></code></pre></td></tr></table></div></div><h2 id=해결책-함수화>해결책: 함수화<a hidden class=anchor aria-hidden=true href=#해결책-함수화>#</a></h2><p>아래는 위 잘못된 케이스를 개선한 예시다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># Good case</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>ask_feeling</span>():
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;How are you feeling?&#39;</span>)
</span></span><span style=display:flex><span>    feeling <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>input</span>()
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;I am happy to hear that you are feeling&#39;</span> <span style=color:#ff79c6>+</span> feeling)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;Good morning!&#39;</span>)
</span></span><span style=display:flex><span>ask_feeling()
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;Good afternoon!&#39;</span>)
</span></span><span style=display:flex><span>ask_feeling()
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;Good evening!&#39;</span>)
</span></span><span style=display:flex><span>ask_feeling()
</span></span></code></pre></td></tr></table></div></div><p>다시 위 코드를 개선해보자.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>for</span> time_of_day <span style=color:#ff79c6>in</span> [<span style=color:#f1fa8c>&#39;morning&#39;</span>, <span style=color:#f1fa8c>&#39;afternoon&#39;</span>, <span style=color:#f1fa8c>&#39;evening&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>f</span><span style=color:#f1fa8c>&#39;Good </span><span style=color:#f1fa8c>{</span>time_of_day<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c> !&#39;</span>)
</span></span><span style=display:flex><span>    ask_feeling()
</span></span></code></pre></td></tr></table></div></div><p>이처럼 코드를 더 적은 수로, 목적이 확실하게, 유지보수성이 좋게 바꿀 수 있다.</p><p> </p><hr><h1 id=code-smell-2-의도가-드러나지-않은-값들>code smell: 2) 의도가 드러나지 않은 값들<a hidden class=anchor aria-hidden=true href=#code-smell-2-의도가-드러나지-않은-값들>#</a></h1><p>코드를 보면 뜬끔없이 숫자(magic number)나, 문자열이 나타나질 때가 있다.</p><p>의도, 목적이 명확하게 드러나지 않는 부분 또한 code smell이 나는 부분이다.</p><h2 id=해결책-숫자를-상수로-사용하기>해결책: 숫자를 상수로 사용하기<a hidden class=anchor aria-hidden=true href=#해결책-숫자를-상수로-사용하기>#</a></h2><p>숫자를 숫자로 그대로 사용하면 몇 달 후, 작성자가 다시 볼 때나 다른 사람이 볼 때 이 숫자의 의미를 알 수 없다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># Bad case</span>
</span></span><span style=display:flex><span>expiration <span style=color:#ff79c6>=</span> time<span style=color:#ff79c6>.</span>time() <span style=color:#ff79c6>+</span> <span style=color:#bd93f9>604800</span>
</span></span></code></pre></td></tr></table></div></div><p>그래서 이를 옆에 주석을 달아서 다음과 같이 작성할 수 있지만, 이보다는 상수 변수로 사용하는 게 더 좋은 방식이다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># Bad case</span>
</span></span><span style=display:flex><span>expiration <span style=color:#ff79c6>=</span> time<span style=color:#ff79c6>.</span>time() <span style=color:#ff79c6>+</span> <span style=color:#bd93f9>604800</span> <span style=color:#6272a4># Expire in one week</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># Good case</span>
</span></span><span style=display:flex><span>SECONDS_PER_MINUTE <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>60</span>
</span></span><span style=display:flex><span>SECONDS_PER_HOUR <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>60</span> <span style=color:#ff79c6>*</span> SECONDS_PER_MINUTE 
</span></span><span style=display:flex><span>SECONDS_PER_DAY <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>24</span> <span style=color:#ff79c6>*</span>  SECONDS_PER_HOUR
</span></span><span style=display:flex><span>SECONDS_PER_WEEK <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>7</span> <span style=color:#ff79c6>*</span> SECONDS_PER_DAY  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>expiration <span style=color:#ff79c6>=</span> time<span style=color:#ff79c6>.</span>time() <span style=color:#ff79c6>+</span> SECONDS_PER_WEEK
</span></span></code></pre></td></tr></table></div></div><p>이 방식으로 작성했을 때, 또 다른 장점을 예시를 들어 언급해보겠다.</p><p>이렇게 동일한 값이어도 다른 상수로 구분했을 경우, NUM_CARDS_IN_DECK 를 수정해도 NUM_WEEKS_IN_YEAR 에 영향을 주지 않는다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># Good case</span>
</span></span><span style=display:flex><span>NUM_CARDS_IN_DECK <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>52</span>
</span></span><span style=display:flex><span>NUM_WEEKS_IN_YEAR <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>52</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;This deck contains&#39;</span>, NUM_CARDS_IN_DECK, <span style=color:#f1fa8c>&#39;cards.&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;The 2-year contract lasts for&#39;</span>, <span style=color:#bd93f9>2</span> <span style=color:#ff79c6>*</span> NUM_WEEKS_IN_YEAR, <span style=color:#f1fa8c>&#39;weeks.&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p> </p><h2 id=해결책-문자열을-상수로-사용하기>해결책: 문자열을 상수로 사용하기<a hidden class=anchor aria-hidden=true href=#해결책-문자열을-상수로-사용하기>#</a></h2><p>문자열로 입력을 하면 이 문자열이 무슨 목적과 의도를 가지는지 모른다. 그렇다고 변수로 입력하면 undefind 가 뜬다.</p><p>아래 코드를 예를 들어 설명해보자.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>NORTH <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;north&#39;</span>
</span></span><span style=display:flex><span>SOUTH <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;south&#39;</span>
</span></span><span style=display:flex><span>EAST <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;east&#39;</span>
</span></span><span style=display:flex><span>WEST <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;west&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>while</span> <span style=color:#ff79c6>True</span>: 
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;태양광 패널 방향을 정해라.&#39;</span>)
</span></span><span style=display:flex><span>    direction <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>input</span>()<span style=color:#ff79c6>.</span>lower()
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> direction <span style=color:#ff79c6>in</span> (NORTH, SOUTH, EAST, WEST):
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>break</span> 
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>f</span><span style=color:#f1fa8c>&#39;태양광 패널의 방향은 </span><span style=color:#f1fa8c>{</span>direction<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c> 이다.&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># Bad case 1</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>if</span> direction <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;nrth&#39;</span>:
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;북쪽을 바라보는 것은 효율적이지 않다.&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># Bad case 2</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>if</span> direction <span style=color:#ff79c6>==</span> NRTH:
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;북쪽을 바라보는 것은 효율적이지 않다.&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p>아래처럼 <code>direction == 'nrth'</code> 로 입력하면 <code>'nrth'</code> 가 무엇을 의미하는지 모르고, <code>NRTH</code>로 입력하면 undefined가 뜬다.</p><p> </p><hr><h1 id=code-smell-3-죽은-코드>code smell: 3) 죽은 코드<a hidden class=anchor aria-hidden=true href=#code-smell-3-죽은-코드>#</a></h1><h2 id=죽은-코드란>죽은 코드란?<a hidden class=anchor aria-hidden=true href=#죽은-코드란>#</a></h2><p>코드를 일시적으로 주석 처리하는 방식이 테스트 과정에서 흔히 사용된다.</p><p>그런데, 주석 처리된 코드가 그대로 남아있으면, 왜 주석처리되었는지 모르는 상태가 된다.</p><p>또한, 항상 false 조건인 if block이나, 절대 호출되지 않는 함수 등</p><p><strong><em>작성한 의미가 없는 코드</em></strong> 를 모두 <strong>죽은 코드</strong> 라고 한다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>import</span> random
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>coinFlip</span>():
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> random<span style=color:#ff79c6>.</span>randint(<span style=color:#bd93f9>0</span>, <span style=color:#bd93f9>1</span>):
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#f1fa8c>&#39;Heads!&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#f1fa8c>&#39;Tails!&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> <span style=color:#f1fa8c>&#39;The coin landed on its edge!&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(coinFlip)
</span></span></code></pre></td></tr></table></div></div><p>위 실행에서 맨 마지막 줄인 <code>return 'The coin landed on its edge!'</code>은 실행되지 않는 코드다. 이것이 바로 죽은 코드다.</p><p> </p><h2 id=죽은-코드의-예외-stub>죽은 코드의 예외: stub<a hidden class=anchor aria-hidden=true href=#죽은-코드의-예외-stub>#</a></h2><p><strong><em>stub</em></strong> 이란 <strong><em>함수가 아직 호출될 준비가 되지 않은 것을 보여주는 코드</em></strong> 다.</p><p>다음과 같이 함수가 실행될 때 error가 발생하지 않도록 아무 작업도 수행하지 않는 pass문이나, <code>raise NotImplemnetedError</code> 로 stub을 걸 수 있다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>example_function</span>():
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>pass</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>example_function</span>():
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>raise</span> NotImplementedError
</span></span></code></pre></td></tr></table></div></div><p> </p><hr><h1 id=code-smell-4-숫자-접미사가-붙은-변수>code smell: 4) 숫자 접미사가 붙은 변수<a hidden class=anchor aria-hidden=true href=#code-smell-4-숫자-접미사가-붙은-변수>#</a></h1><blockquote><p><strong><em>숫자 접미사가 붙은 변수를 사용하지 말고, 그 변수가 3개 이상일 경우 collection을 사용하자</em></strong></p></blockquote><p>이 부분은 이전에 학습한 Chapter 04의 naming에도 해당된다.</p><p>숫자 접미사가 붙은 변수란 <code>password1</code>, <code>password2</code>, <code>pet1Name</code>, <code>pet2Name</code>, <code>pet3Name</code> 처럼 접미사로 숫자가 붙은 것 뿐만 아니라 숫자로 구분된 변수를 의미한다.</p><p>이렇게 작성하면 <strong><em>변수들 간의 차이점을 알 수 없다.</em></strong></p><p>그래서 변수마다 고유한 이름을 작성하자.</p><p>좌표계 개념을 변수에 도입하고 싶으면 x1, x2, y1, y2가 아니라 start_x, end_x, start_y, end_y 로 작성하자.</p><p> </p><h2 id=숫자-접미사가-3개-이상인-경우>숫자 접미사가 3개 이상인 경우<a hidden class=anchor aria-hidden=true href=#숫자-접미사가-3개-이상인-경우>#</a></h2><p><strong>각 데이터를 독립적인 변수에 담는 것이 아닌 list, set, dictionary 같은 collection으로 저장</strong> 하자.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># Bad case</span>
</span></span><span style=display:flex><span>pet1Name <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;one&#39;</span>
</span></span><span style=display:flex><span>pet2Name <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;two&#39;</span>
</span></span><span style=display:flex><span>pet3Name <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;three&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># Good case</span>
</span></span><span style=display:flex><span>petNames <span style=color:#ff79c6>=</span> [<span style=color:#f1fa8c>&#39;one&#39;</span>, <span style=color:#f1fa8c>&#39;two&#39;</span>, <span style=color:#f1fa8c>&#39;three&#39;</span>]
</span></span><span style=display:flex><span>petNames <span style=color:#ff79c6>=</span> {<span style=color:#f1fa8c>&#39;one&#39;</span>, <span style=color:#f1fa8c>&#39;two&#39;</span>, <span style=color:#f1fa8c>&#39;three&#39;</span>}
</span></span></code></pre></td></tr></table></div></div><p> </p><h2 id=예외-숫자가-고유-이름의-일부일-경우>예외: 숫자가 고유 이름의 일부일 경우<a hidden class=anchor aria-hidden=true href=#예외-숫자가-고유-이름의-일부일-경우>#</a></h2><p>enableIPv6 인 경우, IPv6는 고유 이름으로 상관없다.</p><p> </p><hr><h1 id=code-smell-5-그냥-함수나-모듈이어야하는-클래스>code smell: 5) 그냥 함수나 모듈이어야하는 클래스<a hidden class=anchor aria-hidden=true href=#code-smell-5-그냥-함수나-모듈이어야하는-클래스>#</a></h1><blockquote><p><strong><em>일회성 함수를 만들 때는 클래스 메서드를 만들지 말자.</em></strong></p></blockquote><p>일회성 함수를 만들 때는 클래스를 사용하지 않는다.</p><p>그리고, 함수를 그룹화할 때는 클래스가 아닌 모듈을 사용한다.</p><p>클래스로 잘못만든 함수의 예시를 보자.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>import</span> random
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Dice</span>:
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>def</span> __init__(self, sides<span style=color:#ff79c6>=</span><span style=color:#bd93f9>6</span>):
</span></span><span style=display:flex><span>        self<span style=color:#ff79c6>.</span>sides <span style=color:#ff79c6>=</span> sides
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>roll</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> random<span style=color:#ff79c6>.</span>randint(<span style=color:#bd93f9>1</span>, self<span style=color:#ff79c6>.</span>sides)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>a <span style=color:#ff79c6>=</span> Dice()
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(a<span style=color:#ff79c6>.</span>roll())
</span></span></code></pre></td></tr></table></div></div><p>이 클래스는 사실 아래 함수와 같다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>print</span>(random<span style=color:#ff79c6>.</span>randint(<span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>6</span>))
</span></span></code></pre></td></tr></table></div></div><p>클래스 작성에 대한 객체지향 설계 원칙은 Chapter 15 ~ 17을 참고하자.</p><p> </p><hr><h1 id=code-smell-6-중첩된-list-comprehension>code smell: 6) 중첩된 list comprehension<a hidden class=anchor aria-hidden=true href=#code-smell-6-중첩된-list-comprehension>#</a></h1><blockquote><p><strong><em>중첩 list를 만들 때는 &lsquo;가독성&rsquo;을 위해서 list comprehension 하나에 for 루프문을 사용하여 만들자</em></strong></p></blockquote><h2 id=여러-종류의-comprehension>여러 종류의 comprehension<a hidden class=anchor aria-hidden=true href=#여러-종류의-comprehension>#</a></h2><p>파이썬에는 list comprehension 외에도 set comprehension, dictionary comprehension이 존재한다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># list comprehension 사용 x</span>
</span></span><span style=display:flex><span>span <span style=color:#ff79c6>=</span> []
</span></span><span style=display:flex><span><span style=color:#ff79c6>for</span> number <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>100</span>):
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> number <span style=color:#ff79c6>%</span> <span style=color:#bd93f9>5</span> <span style=color:#ff79c6>!=</span> <span style=color:#bd93f9>0</span>:
</span></span><span style=display:flex><span>        span<span style=color:#ff79c6>.</span>append(<span style=color:#8be9fd;font-style:italic>str</span>(number))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># list comprehension 사용 o</span>
</span></span><span style=display:flex><span>span <span style=color:#ff79c6>=</span> [<span style=color:#8be9fd;font-style:italic>str</span>(number) <span style=color:#ff79c6>for</span> number <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>100</span>) <span style=color:#ff79c6>if</span> number <span style=color:#ff79c6>%</span> <span style=color:#bd93f9>5</span> <span style=color:#ff79c6>!=</span> <span style=color:#bd93f9>0</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># set comprehension</span>
</span></span><span style=display:flex><span>span <span style=color:#ff79c6>=</span> {<span style=color:#8be9fd;font-style:italic>str</span>(number) <span style=color:#ff79c6>for</span> number <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>100</span>) <span style=color:#ff79c6>if</span> number <span style=color:#ff79c6>%</span> <span style=color:#bd93f9>5</span> <span style=color:#ff79c6>!=</span> <span style=color:#bd93f9>0</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># dictionary comprehension</span>
</span></span><span style=display:flex><span>span <span style=color:#ff79c6>=</span> {<span style=color:#8be9fd;font-style:italic>str</span>(number): number <span style=color:#ff79c6>for</span> number <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>100</span>) <span style=color:#ff79c6>if</span> number <span style=color:#ff79c6>%</span> <span style=color:#bd93f9>5</span> <span style=color:#ff79c6>!=</span><span style=color:#bd93f9>0</span>}
</span></span></code></pre></td></tr></table></div></div><p> </p><h2 id=list-comprehension을-사용하여-중첩-리스트-만들기>list comprehension을 사용하여 중첩 리스트 만들기<a hidden class=anchor aria-hidden=true href=#list-comprehension을-사용하여-중첩-리스트-만들기>#</a></h2><p>또한 중첩 리스트를 list comprehension으로 생성할 수 있다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># nested list comprehension</span>
</span></span><span style=display:flex><span>nested_int_list <span style=color:#ff79c6>=</span> [[<span style=color:#bd93f9>0</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>2</span>, <span style=color:#bd93f9>3</span>], [<span style=color:#bd93f9>4</span>], [<span style=color:#bd93f9>5</span>, <span style=color:#bd93f9>6</span>], [<span style=color:#bd93f9>7</span>, <span style=color:#bd93f9>8</span>, <span style=color:#bd93f9>9</span>]]
</span></span><span style=display:flex><span>nested_str_list <span style=color:#ff79c6>=</span> [[<span style=color:#8be9fd;font-style:italic>str</span>(i) <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> sublist] <span style=color:#ff79c6>for</span> sublist <span style=color:#ff79c6>in</span> nested_int_list]
</span></span></code></pre></td></tr></table></div></div><p> </p><h2 id=중첩-리스트-생성-시-가독성-향상시키는-방법>중첩 리스트 생성 시, 가독성 향상시키는 방법<a hidden class=anchor aria-hidden=true href=#중첩-리스트-생성-시-가독성-향상시키는-방법>#</a></h2><p>하지만 이 코드는 가독성이 좋지 않기 때문에, 중첩 리스트를 생성할 때는 for 루프문을 하나 이상 사용해서 기존의 리스트 컴프리헨션을 확장하는 게 낫다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>nested_int_list <span style=color:#ff79c6>=</span> [[<span style=color:#bd93f9>0</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>2</span>, <span style=color:#bd93f9>3</span>], [<span style=color:#bd93f9>4</span>], [<span style=color:#bd93f9>5</span>, <span style=color:#bd93f9>6</span>], [<span style=color:#bd93f9>7</span>, <span style=color:#bd93f9>8</span>, <span style=color:#bd93f9>9</span>]]
</span></span><span style=display:flex><span>nested_str_list <span style=color:#ff79c6>=</span> []
</span></span><span style=display:flex><span><span style=color:#ff79c6>for</span> sublist <span style=color:#ff79c6>in</span> nested_int_list:
</span></span><span style=display:flex><span>    nested_str_list<span style=color:#ff79c6>.</span>append([<span style=color:#8be9fd;font-style:italic>str</span>(i) <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> sublist])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># 결과</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>&gt;&gt;&gt;</span> nested_str_list
</span></span><span style=display:flex><span>[[<span style=color:#f1fa8c>&#39;0&#39;</span>, <span style=color:#f1fa8c>&#39;1&#39;</span>, <span style=color:#f1fa8c>&#39;2&#39;</span>, <span style=color:#f1fa8c>&#39;3&#39;</span>], [<span style=color:#f1fa8c>&#39;4&#39;</span>], [<span style=color:#f1fa8c>&#39;5&#39;</span>, <span style=color:#f1fa8c>&#39;6&#39;</span>], [<span style=color:#f1fa8c>&#39;7&#39;</span>, <span style=color:#f1fa8c>&#39;8&#39;</span>, <span style=color:#f1fa8c>&#39;9&#39;</span>]]
</span></span></code></pre></td></tr></table></div></div><p> </p><hr><h1 id=code-smell-7-빈-예외-처리-블록과-부실한-에러-메시지>code smell: 7) 빈 예외 처리 블록과 부실한 에러 메시지<a hidden class=anchor aria-hidden=true href=#code-smell-7-빈-예외-처리-블록과-부실한-에러-메시지>#</a></h1><blockquote><p><strong><em>해당 코드를 사용하는 사용자가 조치를 어떻게 취하라는 에러 메시지를 가진 예외 처리 블록을 만들자. 프로그램에서 발생할 수 있는 모든 예외를 처리하지 않으면 프로그램 개발은 완료된 것이 아니다.</em></strong></p></blockquote><h2 id=빈-예외처리-블록>빈 예외처리 블록<a hidden class=anchor aria-hidden=true href=#빈-예외처리-블록>#</a></h2><p>예외 처리 블록(except)이 없으면 파이썬 프로그램은 즉시 멈추면서 충돌을 일으켜서 저장되지 않은 작업이 손실되거나, 파일이 반만 완료된 상태로 남아 있을 수 있다.</p><p>그래서 개발자들은 이 부분을 비어있지 않도록 만들기 위해서 다음과 같이 작성하는 경우가 있다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>try</span>:
</span></span><span style=display:flex><span>    num <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>input</span>(<span style=color:#f1fa8c>&#39;Enter a number: &#39;</span>)
</span></span><span style=display:flex><span>    num <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>int</span>(num)
</span></span><span style=display:flex><span><span style=color:#ff79c6>except</span> ValueError:
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>pass</span> 
</span></span></code></pre></td></tr></table></div></div><p> </p><p>이는 except 블록이 존재하지만 사실상 예외 처리를 하지 않는 것이다. 이렇게 프로그램이 넘어가면 에러를 처리하기보다는 감춰 버려서 더 심각한 버그가 만들어질 수 있다.</p><p> </p><h2 id=부실한-에러-메세지>부실한 에러 메세지<a hidden class=anchor aria-hidden=true href=#부실한-에러-메세지>#</a></h2><p>그래서 다음과 같이 수정해보자.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>try</span>: 
</span></span><span style=display:flex><span>    num <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>input</span>(<span style=color:#f1fa8c>&#39;Enter a number: &#39;</span>)
</span></span><span style=display:flex><span>    num <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>int</span>(num)
</span></span><span style=display:flex><span><span style=color:#ff79c6>except</span> ValueError:
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;An incorrect value was passed to int()&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p>구체적인 문제 상황을 알 수 있지만, 사용자가 어떻게 할 수 있는 게 아니다. 이보다는 사용자가 여기서 무엇을 어떻게 해야할지를 설명하는 게 더 성숙한 코드라고 생각한다.</p><p>그래서 <code>print('You have to input a number')</code> 로 하는 게 더 낫다고 판단된다.</p><p> </p><hr><h1 id=debug>Debug<a hidden class=anchor aria-hidden=true href=#debug>#</a></h1><p>debug 시에 많은 사람들이 디버깅 정보를 출려갛기 위해 print() 호출을 사용한다.</p><p>쉬운 방법이지만, 장기적으로 버그를 진단하기 위해서는 debugger와 log에 의존하는 게 더 빠르다.</p><p> </p><hr><h1 id=code-smell에-관한-잘못된-통념>code smell에 관한 잘못된 통념<a hidden class=anchor aria-hidden=true href=#code-smell에-관한-잘못된-통념>#</a></h1><p>code smell(코드 악취)인 줄 알았지만, 사실 아닌 것들에 대해 정리해본다.</p><h2 id=함수-마지막에는-return-문이-하나만-있여야-한다>함수 마지막에는 return 문이 하나만 있여야 한다?<a hidden class=anchor aria-hidden=true href=#함수-마지막에는-return-문이-하나만-있여야-한다>#</a></h2><p>하나의 입구, 하나의 출구라는 아이디어는 어셈블리어 언어와 포트란 언어로 프로그래밍하던 시절에 나온 조언을 잘못 해석한데에서 비롯된다.</p><p>함수나 메소드마다 return 문을 하나씩만 유지하려면, 여러 개의 if-else 문으로 작성되어 분기처리하기 때문에 return 문이 둘 이상 있어도 괜찮다.</p><p> </p><h2 id=함수에는-try-문이-둘-이상-있으면-안된다>함수에는 try 문이 둘 이상 있으면 안된다?<a hidden class=anchor aria-hidden=true href=#함수에는-try-문이-둘-이상-있으면-안된다>#</a></h2><p>함수와 메서드는 한 가지일만 해야하는 건 맞지만, 예외 처리도 별도의 함수에서 발생해야 한다는 의미는 아니다.</p><p>별도의 함수에서 발생해야한다는 사람들은 아래 코드를 다음과 같이 수정해야 한다고 말한다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># before</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>import</span> os 
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>deleteWithConfirmation</span>(filename):
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>try</span>:
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>if</span> (<span style=color:#8be9fd;font-style:italic>input</span>(<span style=color:#f1fa8c>&#39;Delete&#39;</span> <span style=color:#ff79c6>+</span> filename <span style=color:#ff79c6>+</span> <span style=color:#f1fa8c>&#39;, are you sure ? Y/N&#39;</span>) <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;Y&#39;</span>):
</span></span><span style=display:flex><span>            os<span style=color:#ff79c6>.</span>unlink(filename)
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>except</span> FileNotFoundError:
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;That file already did not exist.&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># after</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>import</span> os 
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>handleErrorForDeleteWithConfirmation</span>(filename):
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>try</span>:
</span></span><span style=display:flex><span>        _deleteWithConfirmation(filename)
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>except</span> FileNotFoundError:
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#39;That file already did not exist.&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>_deleteWithConfirmation</span>(filename):
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> <span style=color:#8be9fd;font-style:italic>input</span>(<span style=color:#f1fa8c>&#39;Delete&#39;</span> <span style=color:#ff79c6>+</span> filename <span style=color:#ff79c6>+</span> <span style=color:#f1fa8c>&#39;, are you sure ? Y/N&#39;</span>) <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;Y&#39;</span><span style=color:#f1fa8c>&#34;</span>
</span></span><span style=display:flex><span>        os<span style=color:#ff79c6>.</span>unlink(filename)
</span></span></code></pre></td></tr></table></div></div><p>위와 같이 함수로 &lsquo;한 가지 일&rsquo;에 집중하여 나눴지만, 오히려 복잡하다.</p><p>이 &lsquo;일&rsquo;을 어떻게 정의해야할지 생각해보자.</p><p> </p><h2 id=플래그-인수는-나쁘다>플래그 인수는 나쁘다?<a hidden class=anchor aria-hidden=true href=#플래그-인수는-나쁘다>#</a></h2><p><strong>플래그 인수</strong> 란 함수 또는 메소드 호출의 boolean 인수를 말한다.</p><p>이 플래그 인수는 다음과 같이 사용된다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>someFunction</span>(flagArgument):
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> flagArgument:
</span></span><span style=display:flex><span>        <span style=color:#6272a4># 특정 코드 실행</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#6272a4># 완전히 다른 특정 코드 실행  </span>
</span></span></code></pre></td></tr></table></div></div><p>이 값이 True냐 false이냐에 따라서 다르게 작동한다.</p><p>이 인수를 사용하는 예가 <code>sorted()</code> 다. reverse 키워드 인자에 boolean 값을 전달해서 정렬 순서를 정할 수 있다.</p><p>그런데 왜 플래그 인수를 code smell로 여길까?</p><p>이 값에 따라 실행되는 내용이 달라서 2개의 함수를 만들어야 한다는 통념 때문이다.</p><p>오히려 2개의 함수로 나누면 더 복잡해진다.</p><p> </p><h2 id=전역-변수는-나쁘다>전역 변수는 나쁘다?<a hidden class=anchor aria-hidden=true href=#전역-변수는-나쁘다>#</a></h2><p>함수와 메서드가 전역 변수를 사용한다면 변수가 잊혀지는 격리 기능을 일부 잃어버린다.</p><p>이 격리 기능으로 올바르게 작동될 수도 있다.</p><p>하지만, 이 전역 변수를 많이 사용하면 인수가 많아져서 복잡도가 높아지듯이 복잡해지고, 버그 발생 가능성도 높아진다.</p><p>이 전역 변수를 사용하는 함수에서 에러가 발생됬을 경우 프로그램 전체에서 다 찾아봐야하기 때문에 전역 변수 사용을 권장하지 않는다.</p><p>하지만 이 책에서 말하고 싶은 건 &lsquo;모든&rsquo; 전역 변수는 나쁜 아니라는 사실이다.</p><p> </p><h2 id=주석은-불필요하다>주석은 불필요하다?<a hidden class=anchor aria-hidden=true href=#주석은-불필요하다>#</a></h2><p>이런 주장이 나온 이유는 나쁜 주석이 달린 코드는 주석이 전혀 없는 것보다 더 나쁘기 때문이다.</p><p>하지만, 주석을 간결하고 효과적으로 작성한다면 훨씬 도움이 된다.</p><p>실제 프로그램에서는 주석이 너무 많거나 잘못된 주석이 문제라기보다는 주석이 아예 없거나 부족한 경우가 대부분이다.</p><p>주석을 효과적으로 작성하는 방법은 Chapter 10에서 학습한다.</p><p> </p><hr><h1 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h1><ul><li><a href="https://book.interpark.com/product/BookDisplay.do?_method=detail&sc.prdNo=355096830&gclid=Cj0KCQjw166aBhDEARIsAMEyZh4ltxiM-nlGaj3yjPIW82A6l-hPlXjmjBCqtmw6xzqRX8dc8Rk6PFMaAjm9EALw_wcB">클린 코드, 이제는 파이썬이다.</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://jeha00.github.io/tags/til/>TIL</a></li><li><a href=http://jeha00.github.io/tags/book-study/>Book Study</a></li></ul><nav class=paginav><a class=prev href=http://jeha00.github.io/post/bookstudy/pythoncleancode/chapter06_writingpythoniccode/><span class=title>« Prev Page</span><br><span>클린 코드, 이제는 파이썬이다: Write pythonic code</span></a>
<a class=next href=http://jeha00.github.io/post/project/devket/deployment/02_deployment_cors/><span class=title>Next Page »</span><br><span>Project: deployment issue - S3 CORS</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 클린 코드, 이제는 파이썬이다: Find code smell on twitter" href="https://twitter.com/intent/tweet/?text=%ed%81%b4%eb%a6%b0%20%ec%bd%94%eb%93%9c%2c%20%ec%9d%b4%ec%a0%9c%eb%8a%94%20%ed%8c%8c%ec%9d%b4%ec%8d%ac%ec%9d%b4%eb%8b%a4%3a%20Find%20code%20smell&url=http%3a%2f%2fjeha00.github.io%2fpost%2fbookstudy%2fpythoncleancode%2fchapter05_findingcodesmell%2f&hashtags=TIL%2cBookStudy"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 클린 코드, 이제는 파이썬이다: Find code smell on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fjeha00.github.io%2fpost%2fbookstudy%2fpythoncleancode%2fchapter05_findingcodesmell%2f&title=%ed%81%b4%eb%a6%b0%20%ec%bd%94%eb%93%9c%2c%20%ec%9d%b4%ec%a0%9c%eb%8a%94%20%ed%8c%8c%ec%9d%b4%ec%8d%ac%ec%9d%b4%eb%8b%a4%3a%20Find%20code%20smell&summary=%ed%81%b4%eb%a6%b0%20%ec%bd%94%eb%93%9c%2c%20%ec%9d%b4%ec%a0%9c%eb%8a%94%20%ed%8c%8c%ec%9d%b4%ec%8d%ac%ec%9d%b4%eb%8b%a4%3a%20Find%20code%20smell&source=http%3a%2f%2fjeha00.github.io%2fpost%2fbookstudy%2fpythoncleancode%2fchapter05_findingcodesmell%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 클린 코드, 이제는 파이썬이다: Find code smell on reddit" href="https://reddit.com/submit?url=http%3a%2f%2fjeha00.github.io%2fpost%2fbookstudy%2fpythoncleancode%2fchapter05_findingcodesmell%2f&title=%ed%81%b4%eb%a6%b0%20%ec%bd%94%eb%93%9c%2c%20%ec%9d%b4%ec%a0%9c%eb%8a%94%20%ed%8c%8c%ec%9d%b4%ec%8d%ac%ec%9d%b4%eb%8b%a4%3a%20Find%20code%20smell"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 클린 코드, 이제는 파이썬이다: Find code smell on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2fjeha00.github.io%2fpost%2fbookstudy%2fpythoncleancode%2fchapter05_findingcodesmell%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 클린 코드, 이제는 파이썬이다: Find code smell on whatsapp" href="https://api.whatsapp.com/send?text=%ed%81%b4%eb%a6%b0%20%ec%bd%94%eb%93%9c%2c%20%ec%9d%b4%ec%a0%9c%eb%8a%94%20%ed%8c%8c%ec%9d%b4%ec%8d%ac%ec%9d%b4%eb%8b%a4%3a%20Find%20code%20smell%20-%20http%3a%2f%2fjeha00.github.io%2fpost%2fbookstudy%2fpythoncleancode%2fchapter05_findingcodesmell%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 클린 코드, 이제는 파이썬이다: Find code smell on telegram" href="https://telegram.me/share/url?text=%ed%81%b4%eb%a6%b0%20%ec%bd%94%eb%93%9c%2c%20%ec%9d%b4%ec%a0%9c%eb%8a%94%20%ed%8c%8c%ec%9d%b4%ec%8d%ac%ec%9d%b4%eb%8b%a4%3a%20Find%20code%20smell&url=http%3a%2f%2fjeha00.github.io%2fpost%2fbookstudy%2fpythoncleancode%2fchapter05_findingcodesmell%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=http://jeha00.github.io/>Jeha DevLog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>