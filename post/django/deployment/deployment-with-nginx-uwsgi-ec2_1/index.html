<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기 | Jeha DevLog</title><meta name=keywords content="Django"><meta name=description content="django appliation을 nginx와 uwsgi를 사용하여 배포하는 과정을 학습한다."><meta name=author content="Me"><link rel=canonical href=http://jeha00.github.io/post/django/deployment/deployment-with-nginx-uwsgi-ec2_1/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.8330bf30523628d00ababead16d63a7b5cd7570bd4901cb3c11ec258628d7a67.css integrity="sha256-gzC/MFI2KNAKur6tFtY6e1zXVwvUkByzwR7CWGKNemc=" rel="preload stylesheet" as=style><link rel=icon href=http://jeha00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://jeha00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://jeha00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=http://jeha00.github.io/apple-touch-icon.png><link rel=mask-icon href=http://jeha00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기"><meta property="og:description" content="django appliation을 nginx와 uwsgi를 사용하여 배포하는 과정을 학습한다."><meta property="og:type" content="article"><meta property="og:url" content="http://jeha00.github.io/post/django/deployment/deployment-with-nginx-uwsgi-ec2_1/"><meta property="og:image" content="http://jeha00.github.io/47"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-10-14T03:16:12+09:00"><meta property="article:modified_time" content="2022-10-14T03:16:12+09:00"><meta property="og:site_name" content="JeHa00 DevLog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://jeha00.github.io/47"><meta name=twitter:title content="Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기"><meta name=twitter:description content="django appliation을 nginx와 uwsgi를 사용하여 배포하는 과정을 학습한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://jeha00.github.io/post/"},{"@type":"ListItem","position":2,"name":"Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기","item":"http://jeha00.github.io/post/django/deployment/deployment-with-nginx-uwsgi-ec2_1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기","name":"Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기","description":"django appliation을 nginx와 uwsgi를 사용하여 배포하는 과정을 학습한다.","keywords":["Django"],"articleBody":"0. Introduction 해당 강의는 러닝스푼즈 - 나노디그리 Python \u0026 Django backed course의 김형종 강사님의 django 강의를 학습한 내용입니다.\n만든 프로젝트를 EC2에 올리고, S3에는 STATIC 파일들을 저장하고, RDS를 연결해보는 실습을 해보고 나서 정리한 것을 올린다.\n또한, 실제 현업에서는 STATIC 파일을 올리는 방법들 중 S3를 사용하는 방식을 사용한다고 한다.\n1. EC2, S3, RDS란? AWS의 EC2, S3, RDS에 대해 간단히 알아보자.\nAWS EC2\n클라우드 인스턴스가 돌아가는 서버 AWS S3\n정적 데이터(static, media etc..)가 올라가는 서버 확장성이 높아서, 스토리지 규모를 확장/축소할 수 있다. 버킷: S3에 저장되는 파일들이 담기는 바구니 AWS RDS\n클라우드 스토리지로서, 인터넷 공간에 데이터를 저장하는 저장소를 의미 2. 인프라 구조 로컬 서버와 달리 다음과 같이 분산시키는 이유는 트래픽을 분산시키고, 확장성을 갖추기 위함이다.\n로컬 서버로 돌릴 때는 request가 들어오면 local에 있는 runserver가 모든 걸 해결한다. 하지만, 실제 서비스에서는 그렇지 않다.\n🔆 NGINX 와 uWSGI 란?\n무엇인지에 대해서는 [TIL]Web Application Basic study: client와 server / web server structure를 참고한다.\n위 구조에서는 ‘NGINX’ 와 ‘uWSGI’를 사용했다.\n정적 데이터: NGINX -\u003e S3 NGINX는 HTTP request가 들어오면 url를 통해서 정적 데이터인지, 동적 데이터인지를 구별하여 정적 데이터를 처리하는 서버다.\n그래서, 정적 데이터이면 AWS S3로 이동한다.\n동적 데이터: NGINX -\u003e uWSGI -\u003e Django -\u003e AWS RDS 하지만, 그렇지 않은 루트로 시작되는 것들은 uWSGI로 보내지고, uWSGI가 EC2 위의 django application에게 전달한다. 그리고, 이를 거쳐서 AWS RDS로 저장된다.\n3. EC2 인스턴스 생성하기 + 탄력적 IP 설정 EC2 인스턴스 생성 첫 번째, AWS EC2로 이동하여 로그인 후, 인스턴스를 생성한다.\n두 번째, ubuntu 20.04 프리티어 선택 -\u003e t2.micro 선택 -\u003e 키 페어 생성(RSA, .pem 선택)\n세 번째, 네트워크 설정\n보안그룹 생성 클릭: 보안 그룹 이름은 임의의로 정한다. ‘인터넷에서 HTTPs 트래픽 허용’과 ‘인터넷에서 HTTP 트래픽 허용’ 둘 다 체크 그리고, 인바운드 보안 그룹 규칙 1가지를 추가 유형: ‘사용자 지정 TCP’ 포트 번호: 8000 왜냐하면 장고 시작하는 서버가 8000번 포트이기 때문 소스 유형: 위치 무관 🔆 보안그룹의 인바운드 그룹이란?\nrequest를 받을 때, 일부 프로토콜만 허용하는데 이 범위를 정하는 게 범위 그룹의 인바운드라는 그룹이다. 브라우저로 접근하기 때문에 HTTP에 대한 접근을 허용했다. 탄력적 IP 설정 첫 번째, 모든 인스턴스 목록이 보이는 창에 들어가서 왼쪽에 ‘네트워크 및 보안’ 탭의 ‘탄력적 IP’를 클릭 두 번째, 오른쪽 위에 ‘탄력적 IP 할당’을 클릭 세 번째, region만 ‘ap-northeast-2’ (서울을 의미)인지 확인하고 ‘할당’ 버튼 클릭 네 번째, 생성된 인스턴스에 탄력적 IP 주소 연결하기 생성했으면 연결된 인스턴스가 없기 때문에, 연결작업을 해야 한다. ‘탄력적 IP 할당’ 버튼 왼쪽에 작업 버튼을 클릭하여, ‘탄력적 IP 주소 연결’을 클릭한다. 그 후, 위에서 생성한 인스턴스를 클릭하여 연결한다. 🔆 왜 탄력적 IP 주소라고 하는가?\nEC2가 종료되었다가, 다시 시작하면 IP가 바뀐다. 예를 들어서 공유지 전원을 겄다가 키면 주소가 바뀐다. 그런데 사용 중인 IP주소가 바뀌는 걸 막고자 탄력적 IP를 사용한다. 탄력적 IP 주소를 사용한 결과, 외부에서는 이 IP가 고정된다. 4. pem key에 권한 부여하기 터미널을 실행한 후, 아래 명령어를 입력한다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 $ pwd /Users/jehakim $ mkdir .ssh-ls # pem key 를 옮긴 directory로 이동하기 $ cd .ssh-ls # 다운 받은 pem key를 옮기기 $ mv ~/Downloads/.pem . # pem key에 권한 부여하기 $ chmod 400 .pem 그러면 ssh로 접근하기 위해서 생성한 인스턴스의 Public IP address를 복사하자.\n1 2 3 4 5 $ ssh -i .pem ubuntu@ ... Are you sure you want to continue connecting (yes/no/[fingerprint])? yes ubuntu@ip-172-31-3-151:~$ 리눅스 수업에서 학습했듯이 root로도 접근할 수 있다.\n하지만, 현업에서는 거의 root로는 접근하지 않는다.\n❗️ ssh -i 과정에서 ‘Permission denied(publickey)‘가 뜬다면 원인을 다음 경우들로 생각해보자.\nIP 주소가 잘못된 게 아닌 이상 어딘가 오타가 존재한다는 의미다. 현재 경로가 pem key file이 존재하지 않은 directory에 있다는 것 ❗️ Ubuntu OS에서는 우분투 계정을 기본적으로 제공하므로, 별도로 계정을 추가할 필요가 없다.\n❗️ pem 파일은 Owner read 권한만 존재해야 접근 가능하다.\n5. Install package \u0026 File structure 5.1 Install package ubuntu에서는 패키지 관리를 sudo apt-get을 사용한다.\n1 2 3 4 5 6 7 8 9 10 $ubuntu@ip-172-31-3-151:~$ sudo apt-get update ... $ubuntu@ip-172-31-3-151:~$ sudo apt-get install build-essential # 파이썬 규격을 맞추기 위한 명령어 실행 $ubuntu@ip-172-31-3-151:~$ sudo apt-get install python3.9 python3.9-dev c # 가상환경 모듈 설치 $ubuntu@ip-172-31-3-151:~$ sudo apt-get install virtualenv 위 명령어를 다 실행했으면 파이썬 규격을 맞추기 위해서 아래 명령어를 입력하여 파이썬을 설치한다. 위 작업을 놓치면 UWSGI 를 설치할 수 없다. sudo apt-get install python3.9 python3.9-dev 5.2 File structure 우분투 로그인 시, 기본 경로\n/home/ubuntu/ 프로젝트 경로\n/home/ubuntu/www/ ex) project name: ls-django 1 2 3 4 5 6 7 8 9 10 ubuntu@ip-172-31-3-151:~$ pwd /home/ubuntu ubuntu@ip-172-31-3-151:~$ cd www ubuntu@ip-172-31-3-151:~/www$ git clone ubuntu@ip-172-31-3-151:~/www$ cd ls-django ubuntu@ip-172-31-3-151:~/www/ls-django$ 가상환경 경로\n/home/ubuntu/www//\u003c가상환경 이름\u003e ex) 가상환경 이름: venv 1 2 3 4 5 ubuntu@ip-172-31-3-151:~/www/ls-django$ v ubuntu@ip-172-31-3-151:~/www/ls-django$ source ./venv/bin/activate (venv) ubuntu@ip-172-31-3-151:~/www/ls-django$ 장고 패키지 설치하기\n이미 만들어 놓은 프로젝트를 git clone 경우 이기 때문에 requirements.txt 가 이미 존재한다. 그래서 pip install -r requirements.txt 를 실행하면 자동적으로 장고 패키지들이 설치된다. 6. EC2 public IPv4와 django server 연결 python manage.py runserver 0:8000 을 입력하여 실행해보자.\n0:8000을 입력하지 않으면 EC2 인스턴스의 public IPv4를 사용할 수 없다. 위 명령어를 실행한 후, 브라우저 url 창에 :8000을 입력했을 때, 다음과 같은 Error가 뜨면 잘된 것.\n위 8000번을 사용하기 위해서 인바운드 그룹에 추가했다. 1 2 3 DisallowedHost at / Invalid HTTP_HOST header: '13.125.32.21:8000'. You may need to add '13.125.32.21' to ALLOWED_HOSTS. 그러면 Host 부분을 수정하기 위해 vi settings.py를 입력하여, ALLOWED_HOST 부분을 다음과 같이 수정해보자.\nALLOWED_HOST = ['*'] python manage.py runserver 0:8000 실행 후, :8000 을 입력하면 정상적으로 화면이 나타난다.\n🔆 uwsgi 를 설치하지 않아도, 화면이 정상적으로 뜬다. 하지만 이 경우, uwsgi가 없기 때문에 nginx 와 연결될 수 없다.\n7. uWSGI 설치 및 적용하기 local에서 하는 게 아니기 때문에 uwsgi를 반드시 설치해야 한다. uwsgi 설명: 파이썬으로 된 장고 프로젝트를 실행하는 역할을 한다. uWSGI installation uWSGI 설치 명령어 pip install uwsgi 만약 uwsgi가 설치되지 않는다면 아래 명령어를 실행하지 않은 것이다. sudo apt-get install python3.9 python3.9-dev uWSGI 파일 수정 및 적용 uWSGI 파일 수정 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 # 경로: /home/ubuntu/www/ls-django $ mkdir .conf $ cd .conf # 아래 명령어를 입력하여, 생성 및 내용 입력 $ vi uwsgi.ini ## uwsgi.ini # 아래 내용 입력 후 esc → `:wq!` 눌러 저장 종료한다. [uwsgi] # 아래 3가지 변수는 장고가 uWSGI를 실행할 수 있는 환경을 만들어주는 것 chdir = /home/ubuntu/www/ls-django module = config.wsgi:application home = /home/ubuntu/www/ls-django/venv socket = /tmp/app.sock chmod-socket = 666 vacuum = true master = true daemonize = /home/ubuntu/www/ls-django/uwsgi.log uwsgi 내부 변수 설명\ndjango가 uWSGI를 실행할 수 있는 환경을 만들어주는 변수 3가지 chdir : django project 경로 module : django project wsgi module 위치 home : 가상환경 위치 socket : IP 네트워크로도 이용할 수 있으나, 같은 os에 있는 프로세스 있으므로 이럴 때는 소켓을 사용하여 속도 개선을 한다. 동일 서버 내 요청을 중개하는 것으로 소켓 전송 방식으로 진행 대부분 이런 방식을 사용한다. chmod-socket : 권한 부여 vacuum : uWSGI 통하여 생성된 파일을 삭제하는 옵션 master : uWSGI 프로세스를 master로 동작하도록 하는 옵션 daemonize : 백그라운드로 동작하기 위한 옵션이며, log file을 남길 경로 지정 log file이란 uwsgi.log 를 의미 실제로는 더 많은 옵션들이 존재하므로, 더 찾아보자.\nuWSGI 파일 적용 uwsgi --ini uwsgi.ini 명령어를 통해 변경된 설정값을 적용한다. 변경된 설정값을 적용하는 명령어 1 2 3 4 5 6 7 8 9 10 # 경로: www/ls-django/.conf $ uwsgi --ini uwsgi.ini # 실행결과 [uWSGI] getting INI configuration from uwsgi.ini # 그리고, uwsgi.log 가 생성될 것이다. # 이 log를 확인하는 방법은 tail -f uwsgi.log 를 실행한다. # -f 의 의미는 log에 새로 생기면 바로 출력된다는 걸 의미한다. 🔆 uWSGI 과정에서 발생한 Error 정리 Case 1 만약 위 명령어를 입력했을 때 다음과 같은 Error가 뜬다면 다음과 같은 절차로 확인한다. Command 'uwsgi' not found, but can be installed with: 첫 번째, 가상환경이 활성화되어 있는지 확인하라. 두 번째, pip install uwsgi을 실행했는지 생각해라. Case 2 만약 다른 Error로 다음과 같이 뜬다면 경로를 uwsgi.ini file이 있는 경로로 이동하라. realpath() of uwsgi.ini failed: No such file or directory [core/utils.c line 3662] 만약 또 다른 다음 Error가 뜬다면 uwsgi.ini 에 입력한 프로젝트 경로에 root를 입력하지 않은 것이니, 수정하라. 수정 전: home/ubuntu/www/ls-django/uwsgi.log 수정 전: /home/ubuntu/www/ls-django/uwsgi.log 로그 확인 uwsgi --ini uwsgi.ini 의 실행 결과, uwsgi.log가 생성된다.\ntail -f uwsgi.log를 실행하여 로그를 확인할 수 있다.\n-f의 의미: follow의 약어로서, 계속해서 파일의 상태를 감시하며 파일에 내용이 뒤에 추가될 때마다 새로 추가된 내용을 보여준다. 8. NGINX 설치 및 적용하기 nginx 설치하기 Nginx 설치 명령어 실행하기\nsudo apt-get install nginx nginx.conf 수정하기 Nginx를 수정하기 위해서는 프로젝트 내부 파일이 아니기 때문에 ‘sudo’를 사용해야 한다.\n아래 경로 파일 두 가지를 수정할 것이다.\n/etc/nginx/nginx.conf\nsudo vi /etc/nginx/nginx.conf 만약 위 명령어를 입력 시, tab을 눌렀는데 위 단어들이 안나오면 nignx가 설치되지 않은 것이기 때문에 sudo apt-get install nginx 명령어를 실행하자. /etc/nginx/sites-enabled/default\nsudo vi /etc/nginx/sites-enabled/default nginx에 uWSGI socket 연결하기 nginx 안에 uWSGI 소켓을 입력하여 연결시킨다. 그래서 Nginx를 설치하기 전에 uWSGI를 먼저 설치했다.\nuWSGI에서 소켓을 열었다. 이를 어떻게 알 수 있냐면 uwsgi file의 socket = /tmp/app.sock이 바로 소켓을 열었다는 의미다. 이 path를 아래에 나와있다시피 location에 추가하여 연결하자. 그리고, uwsgi의 parameters(params)를 포함시키자. 1 2 3 4 5 6 7 8 9 10 ## 다음 경로 파일 두 가지의 내용 값을 아래와 같이 수정하기 # 파일 경로: /etc/nginx/nginx.conf user ubuntu; # 파일 경로: /etc/nginx/sites-enabled/default location / { uwsgi_pass unix:///tmp/app.sock; include uwsgi_params; } nginx와 uwsgi가 어떻게 연결되는가? 파일 경로: /etc/nginx/sites-enabled/default 내용을 살펴보자.\n포트번호 80을 보고 있다가, 일로 들어온 url 경로가 / 면 location / { } 의 내부 내용 중 uwsgi_pass로 전달해준다. uwsgi가 django app을 실행한다.\nlocation 옆은 url 주소를 의미하고, 내부는 url 주소에 대응되는 프로젝트 디렉토리 경로를 의미 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # Default server configuration # server { listen 80 default_server; listen [::]:80 default_server; root /var/www/html; index index.html index.htm index.nginx-debian.html; server_name _; location / { uwsgi_pass unix:///tmp/app.sock; include uwsgi_params; } 그래서 httprequest가 들어오면 NGINX가 uWSGI로 전달해준다.\nstatic file을 실행시켜주는 것도 위에 location에서 실행한다.\nnginx 적용하기 위 내용을 파일에 입력했으면 다음 명령어 2가지를 실행한다.\nsudo service nginx reload: nginx 재적용 sudo service nginx status: nginx 상태 확인 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 ubuntu@ip-172-31-3-151:~$ sudo service nginx reload ubuntu@ip-172-31-3-151:~$ sudo service nginx status nginx.service - A high performance web server and a reverse proxy server Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset:\u003e Active: active (running) since Thu 2022-10-13 16:55:50 UTC; 12h ago Docs: man:nginx(8) Process: 24456 ExecReload=/usr/sbin/nginx -g daemon on; master_process on; \u003e Main PID: 21207 (nginx) Tasks: 2 (limit: 1143) Memory: 7.9M CGroup: /system.slice/nginx.service ├─21207 nginx: master process /usr/sbin/nginx -g daemon on; master\u003e └─24457 nginx: worker process Oct 13 16:55:50 ip-172-31-3-151 systemd[1]: Starting A high performance web ser\u003e Oct 13 16:55:50 ip-172-31-3-151 systemd[1]: Started A high performance web serv\u003e Oct 14 05:21:09 ip-172-31-3-151 systemd[1]: Reloading A high performance web se\u003e Oct 14 05:21:09 ip-172-31-3-151 systemd[1]: Reloaded A high performance web ser\u003e lines 1-16/16 (END) 위에 sudo service nginx reload 를 실행한 결과, :8000을 입력하지 않고, python manage.py runserver를 하지 않고 public IPv4 만 입력해도 애플리케이션을 불러올 수 있다.\n하지만, css가 전혀 적용되지 않는다.\n이를 직접 보고 싶으면 불러온 사이트의 inspection tool로 들어가서 Network \u003e CSS 를 클릭하면 status code를 보고 알 수 있다.\nReference 러닝스푼즈 - 나노디그리 Python \u0026 Django backed course ","wordCount":"1797","inLanguage":"en","datePublished":"2022-10-14T03:16:12+09:00","dateModified":"2022-10-14T03:16:12+09:00","author":[{"@type":"Person","name":"Me"}],"mainEntityOfPage":{"@type":"WebPage","@id":"http://jeha00.github.io/post/django/deployment/deployment-with-nginx-uwsgi-ec2_1/"},"publisher":{"@type":"Organization","name":"Jeha DevLog","logo":{"@type":"ImageObject","url":"http://jeha00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://jeha00.github.io/ accesskey=h title="@Jeha00 (Alt + H)">@Jeha00</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=http://jeha00.github.io/me/ title=About><span>About</span></a></li><li><a href=http://jeha00.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=http://jeha00.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://jeha00.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://jeha00.github.io/>Home</a>&nbsp;»&nbsp;<a href=http://jeha00.github.io/post/>Posts</a></div><h1 class=post-title>Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기</h1><div class=post-meta>Django&nbsp;·&nbsp;<span title='2022-10-14 03:16:12 +0900 KST'>October 14, 2022</span>&nbsp;·&nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#0-introduction aria-label="0. Introduction">0. Introduction</a></li><li><a href=#1-ec2-s3-rds%eb%9e%80 aria-label="1. EC2, S3, RDS란?">1. EC2, S3, RDS란?</a></li><li><a href=#2-%ec%9d%b8%ed%94%84%eb%9d%bc-%ea%b5%ac%ec%a1%b0 aria-label="2. 인프라 구조">2. 인프라 구조</a><ul><ul><li><a href=#%ec%a0%95%ec%a0%81-%eb%8d%b0%ec%9d%b4%ed%84%b0-nginx---s3 aria-label="정적 데이터: NGINX -&amp;gt; S3">정적 데이터: NGINX -> S3</a></li><li><a href=#%eb%8f%99%ec%a0%81-%eb%8d%b0%ec%9d%b4%ed%84%b0-nginx---uwsgi---django---aws-rds aria-label="동적 데이터: NGINX -&amp;gt; uWSGI -&amp;gt; Django -&amp;gt; AWS RDS">동적 데이터: NGINX -> uWSGI -> Django -> AWS RDS</a></li></ul></ul></li><li><a href=#3-ec2-%ec%9d%b8%ec%8a%a4%ed%84%b4%ec%8a%a4-%ec%83%9d%ec%84%b1%ed%95%98%ea%b8%b0--%ed%83%84%eb%a0%a5%ec%a0%81-ip-%ec%84%a4%ec%a0%95 aria-label="3. EC2 인스턴스 생성하기 + 탄력적 IP 설정">3. EC2 인스턴스 생성하기 + 탄력적 IP 설정</a><ul><ul><li><a href=#ec2-%ec%9d%b8%ec%8a%a4%ed%84%b4%ec%8a%a4-%ec%83%9d%ec%84%b1 aria-label="EC2 인스턴스 생성">EC2 인스턴스 생성</a></li><li><a href=#%ed%83%84%eb%a0%a5%ec%a0%81-ip-%ec%84%a4%ec%a0%95 aria-label="탄력적 IP 설정">탄력적 IP 설정</a></li></ul></ul></li><li><a href=#4-pem-key%ec%97%90-%ea%b6%8c%ed%95%9c-%eb%b6%80%ec%97%ac%ed%95%98%ea%b8%b0 aria-label="4. pem key에 권한 부여하기">4. pem key에 권한 부여하기</a></li><li><a href=#5-install-package--file-structure aria-label="5. Install package &amp;amp; File structure">5. Install package & File structure</a><ul><li><a href=#51-install-package aria-label="5.1 Install package">5.1 Install package</a></li><li><a href=#52-file-structure aria-label="5.2 File structure">5.2 File structure</a></li></ul></li><li><a href=#6-ec2-public-ipv4%ec%99%80-django-server-%ec%97%b0%ea%b2%b0 aria-label="6. EC2 public IPv4와 django server 연결">6. EC2 public IPv4와 django server 연결</a></li><li><a href=#7-uwsgi-%ec%84%a4%ec%b9%98-%eb%b0%8f-%ec%a0%81%ec%9a%a9%ed%95%98%ea%b8%b0 aria-label="7. uWSGI 설치 및 적용하기">7. uWSGI 설치 및 적용하기</a><ul><li><a href=#uwsgi-installation aria-label="uWSGI installation">uWSGI installation</a></li><li><a href=#uwsgi-%ed%8c%8c%ec%9d%bc-%ec%88%98%ec%a0%95-%eb%b0%8f-%ec%a0%81%ec%9a%a9 aria-label="uWSGI 파일 수정 및 적용">uWSGI 파일 수정 및 적용</a><ul><li><a href=#uwsgi-%ed%8c%8c%ec%9d%bc-%ec%88%98%ec%a0%95 aria-label="uWSGI 파일 수정">uWSGI 파일 수정</a></li><li><a href=#uwsgi-%ed%8c%8c%ec%9d%bc-%ec%a0%81%ec%9a%a9 aria-label="uWSGI 파일 적용">uWSGI 파일 적용</a></li></ul></li><li><a href=#-uwsgi-%ea%b3%bc%ec%a0%95%ec%97%90%ec%84%9c-%eb%b0%9c%ec%83%9d%ed%95%9c-error-%ec%a0%95%eb%a6%ac aria-label="🔆 uWSGI 과정에서 발생한 Error 정리">🔆 uWSGI 과정에서 발생한 Error 정리</a><ul><li><a href=#case-1 aria-label="Case 1">Case 1</a></li><li><a href=#case-2 aria-label="Case 2">Case 2</a></li><li><a href=#%eb%a1%9c%ea%b7%b8-%ed%99%95%ec%9d%b8 aria-label="로그 확인">로그 확인</a></li></ul></li></ul></li><li><a href=#8-nginx-%ec%84%a4%ec%b9%98-%eb%b0%8f-%ec%a0%81%ec%9a%a9%ed%95%98%ea%b8%b0 aria-label="8. NGINX 설치 및 적용하기">8. NGINX 설치 및 적용하기</a><ul><li><a href=#nginx-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0 aria-label="nginx 설치하기">nginx 설치하기</a></li><li><a href=#nginxconf-%ec%88%98%ec%a0%95%ed%95%98%ea%b8%b0 aria-label="nginx.conf 수정하기">nginx.conf 수정하기</a><ul><li><a href=#nginx%ec%97%90-uwsgi-socket-%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0 aria-label="nginx에 uWSGI socket 연결하기">nginx에 uWSGI socket 연결하기</a></li><li><a href=#nginx%ec%99%80-uwsgi%ea%b0%80-%ec%96%b4%eb%96%bb%ea%b2%8c-%ec%97%b0%ea%b2%b0%eb%90%98%eb%8a%94%ea%b0%80 aria-label="nginx와 uwsgi가 어떻게 연결되는가?">nginx와 uwsgi가 어떻게 연결되는가?</a></li></ul></li><li><a href=#nginx-%ec%a0%81%ec%9a%a9%ed%95%98%ea%b8%b0 aria-label="nginx 적용하기">nginx 적용하기</a></li></ul></li><li><a href=#reference aria-label=Reference>Reference</a></li></ul></div></details></div><div class=post-content><h1 id=0-introduction>0. Introduction<a hidden class=anchor aria-hidden=true href=#0-introduction>#</a></h1><ul><li><p>해당 강의는 <a href=https://learningspoons.com/course/detail/django-backend/>러닝스푼즈 - 나노디그리 Python & Django backed course</a>의 김형종 강사님의 django 강의를 학습한 내용입니다.</p></li><li><p>만든 프로젝트를 EC2에 올리고, S3에는 STATIC 파일들을 저장하고, RDS를 연결해보는 실습을 해보고 나서 정리한 것을 올린다.</p></li><li><p>또한, 실제 현업에서는 STATIC 파일을 올리는 방법들 중 S3를 사용하는 방식을 사용한다고 한다.</p></li></ul><p> </p><hr><h1 id=1-ec2-s3-rds란>1. EC2, S3, RDS란?<a hidden class=anchor aria-hidden=true href=#1-ec2-s3-rds란>#</a></h1><p>AWS의 EC2, S3, RDS에 대해 간단히 알아보자.</p><ul><li><p>AWS EC2</p><ul><li>클라우드 인스턴스가 돌아가는 서버</li></ul></li><li><p>AWS S3</p><ul><li>정적 데이터(static, media etc..)가 올라가는 서버</li><li>확장성이 높아서, 스토리지 규모를 확장/축소할 수 있다.</li><li>버킷: S3에 저장되는 파일들이 담기는 바구니</li></ul></li><li><p>AWS RDS</p><ul><li>클라우드 스토리지로서, 인터넷 공간에 데이터를 저장하는 저장소를 의미</li></ul></li></ul><p> </p><hr><h1 id=2-인프라-구조>2. 인프라 구조<a hidden class=anchor aria-hidden=true href=#2-인프라-구조>#</a></h1><blockquote><p><strong><em>로컬 서버와 달리 다음과 같이 분산시키는 이유는 트래픽을 분산시키고, 확장성을 갖추기 위함이다.</em></strong></p></blockquote><p><img loading=lazy src=https://user-images.githubusercontent.com/78094972/195893277-4c665390-8b60-446e-8e05-aa681c40d86a.png alt=image></p><p>로컬 서버로 돌릴 때는 request가 들어오면 local에 있는 runserver가 모든 걸 해결한다. 하지만, 실제 서비스에서는 그렇지 않다.</p><p>🔆 NGINX 와 uWSGI 란?<br>무엇인지에 대해서는 <a href=https://jeha00.github.io/post/network/webapplicationbasic01/>[TIL]Web Application Basic study: client와 server / web server structure</a>를 참고한다.</p><p>위 구조에서는 &lsquo;NGINX&rsquo; 와 &lsquo;uWSGI&rsquo;를 사용했다.</p><h3 id=정적-데이터-nginx---s3>정적 데이터: NGINX -> S3<a hidden class=anchor aria-hidden=true href=#정적-데이터-nginx---s3>#</a></h3><p>NGINX는 HTTP request가 들어오면 url를 통해서 정적 데이터인지, 동적 데이터인지를 구별하여 정적 데이터를 처리하는 서버다.</p><p>그래서, 정적 데이터이면 AWS S3로 이동한다.</p><h3 id=동적-데이터-nginx---uwsgi---django---aws-rds>동적 데이터: NGINX -> uWSGI -> Django -> AWS RDS<a hidden class=anchor aria-hidden=true href=#동적-데이터-nginx---uwsgi---django---aws-rds>#</a></h3><p>하지만, 그렇지 않은 루트로 시작되는 것들은 uWSGI로 보내지고, uWSGI가 EC2 위의 django application에게 전달한다. 그리고, 이를 거쳐서 AWS RDS로 저장된다.</p><p> </p><hr><h1 id=3-ec2-인스턴스-생성하기--탄력적-ip-설정>3. EC2 인스턴스 생성하기 + 탄력적 IP 설정<a hidden class=anchor aria-hidden=true href=#3-ec2-인스턴스-생성하기--탄력적-ip-설정>#</a></h1><h3 id=ec2-인스턴스-생성>EC2 인스턴스 생성<a hidden class=anchor aria-hidden=true href=#ec2-인스턴스-생성>#</a></h3><ul><li><p>첫 번째, AWS EC2로 이동하여 로그인 후, 인스턴스를 생성한다.</p></li><li><p>두 번째, ubuntu 20.04 프리티어 선택 -> t2.micro 선택 -> 키 페어 생성(RSA, .pem 선택)</p></li><li><p>세 번째, 네트워크 설정</p><ul><li>보안그룹 생성 클릭: 보안 그룹 이름은 임의의로 정한다.</li><li>&lsquo;인터넷에서 HTTPs 트래픽 허용&rsquo;과 &lsquo;인터넷에서 HTTP 트래픽 허용&rsquo; 둘 다 체크</li><li>그리고, 인바운드 보안 그룹 규칙 1가지를 추가<ul><li>유형: &lsquo;사용자 지정 TCP&rsquo;</li><li>포트 번호: 8000<ul><li>왜냐하면 장고 시작하는 서버가 8000번 포트이기 때문</li></ul></li><li>소스 유형: 위치 무관</li></ul></li></ul></li></ul><p><strong>🔆 보안그룹의 인바운드 그룹이란?</strong></p><ul><li>request를 받을 때, 일부 프로토콜만 허용하는데 이 범위를 정하는 게 범위 그룹의 인바운드라는 그룹이다.</li><li>브라우저로 접근하기 때문에 HTTP에 대한 접근을 허용했다.</li></ul><p> </p><h3 id=탄력적-ip-설정>탄력적 IP 설정<a hidden class=anchor aria-hidden=true href=#탄력적-ip-설정>#</a></h3><ul><li>첫 번째, 모든 인스턴스 목록이 보이는 창에 들어가서 왼쪽에 &lsquo;네트워크 및 보안&rsquo; 탭의 &lsquo;탄력적 IP&rsquo;를 클릭</li><li>두 번째, 오른쪽 위에 &lsquo;탄력적 IP 할당&rsquo;을 클릭</li><li>세 번째, region만 &lsquo;ap-northeast-2&rsquo; (서울을 의미)인지 확인하고 &lsquo;할당&rsquo; 버튼 클릭</li><li>네 번째, 생성된 인스턴스에 탄력적 IP 주소 연결하기<ul><li>생성했으면 연결된 인스턴스가 없기 때문에, 연결작업을 해야 한다.</li><li>&lsquo;탄력적 IP 할당&rsquo; 버튼 왼쪽에 작업 버튼을 클릭하여, &lsquo;탄력적 IP 주소 연결&rsquo;을 클릭한다. 그 후, 위에서 생성한 인스턴스를 클릭하여 연결한다.</li></ul></li></ul><p><strong>🔆 왜 탄력적 IP 주소라고 하는가?</strong></p><ul><li>EC2가 종료되었다가, 다시 시작하면 IP가 바뀐다. 예를 들어서 공유지 전원을 겄다가 키면 주소가 바뀐다. 그런데 사용 중인 IP주소가 바뀌는 걸 막고자 탄력적 IP를 사용한다.</li><li>탄력적 IP 주소를 사용한 결과, 외부에서는 이 IP가 고정된다.</li></ul><p> </p><hr><h1 id=4-pem-key에-권한-부여하기>4. pem key에 권한 부여하기<a hidden class=anchor aria-hidden=true href=#4-pem-key에-권한-부여하기>#</a></h1><p>터미널을 실행한 후, 아래 명령어를 입력한다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#ae81ff>$ pwd</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>/Users/jehakim</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ mkdir .ssh-ls</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># pem key 를 옮긴 directory로 이동하기</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ cd .ssh-ls </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 다운 받은 pem key를 옮기기</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ mv ~/Downloads/&lt;perm key name&gt;.pem . </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># pem key에 권한 부여하기</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ chmod 400 &lt;perm key name&gt;.pem</span>
</span></span></code></pre></td></tr></table></div></div><p>그러면 ssh로 접근하기 위해서 생성한 인스턴스의 Public IP address를 복사하자.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#ae81ff>$ ssh -i &lt;perm key name&gt;.pem ubuntu@&lt;public IP address&gt;</span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ae81ff>Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ubuntu@ip-172-31-3-151:~$</span>
</span></span></code></pre></td></tr></table></div></div><p>리눅스 수업에서 학습했듯이 root로도 접근할 수 있다.</p><p>하지만, 현업에서는 거의 root로는 접근하지 않는다.</p><p><strong>❗️ ssh -i 과정에서 &lsquo;Permission denied(publickey)&lsquo;가 뜬다면 원인을 다음 경우들로 생각해보자.</strong></p><ul><li>IP 주소가 잘못된 게 아닌 이상 어딘가 오타가 존재한다는 의미다.</li><li>현재 경로가 pem key file이 존재하지 않은 directory에 있다는 것</li></ul><p><strong>❗️ Ubuntu OS에서는 우분투 계정을 기본적으로 제공하므로, 별도로 계정을 추가할 필요가 없다.</strong><br><strong>❗️ pem 파일은 Owner read 권한만 존재해야 접근 가능하다.</strong></p><p> </p><hr><h1 id=5-install-package--file-structure>5. Install package & File structure<a hidden class=anchor aria-hidden=true href=#5-install-package--file-structure>#</a></h1><h2 id=51-install-package>5.1 Install package<a hidden class=anchor aria-hidden=true href=#51-install-package>#</a></h2><blockquote><p><strong><em>ubuntu에서는 패키지 관리를 <code>sudo apt-get</code>을 사용한다.</em></strong></p></blockquote><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#ae81ff>$ubuntu@ip-172-31-3-151:~$ sudo apt-get update</span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ubuntu@ip-172-31-3-151:~$ sudo apt-get install build-essential</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 파이썬 규격을 맞추기 위한 명령어 실행</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ubuntu@ip-172-31-3-151:~$ sudo apt-get install python3.9 python3.9-dev</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>c</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 가상환경 모듈 설치</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ubuntu@ip-172-31-3-151:~$ sudo apt-get install virtualenv</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>위 명령어를 다 실행했으면 파이썬 규격을 맞추기 위해서 아래 명령어를 입력하여 파이썬을 설치한다.<ul><li>위 작업을 놓치면 <strong>UWSGI</strong> 를 설치할 수 없다.</li><li><code>sudo apt-get install python3.9 python3.9-dev</code></li></ul></li></ul><p> </p><h2 id=52-file-structure>5.2 File structure<a hidden class=anchor aria-hidden=true href=#52-file-structure>#</a></h2><ul><li><p>우분투 로그인 시, 기본 경로</p><ul><li><code>/home/ubuntu/</code></li></ul></li><li><p>프로젝트 경로</p><ul><li><code>/home/ubuntu/www/&lt;project name></code></li><li>ex) project name: ls-django</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#ae81ff>ubuntu@ip-172-31-3-151:~$ pwd</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>/home/ubuntu</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ubuntu@ip-172-31-3-151:~$ cd www</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ubuntu@ip-172-31-3-151:~/www$ git clone &lt;git repository address&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ubuntu@ip-172-31-3-151:~/www$ cd ls-django</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ubuntu@ip-172-31-3-151:~/www/ls-django$ </span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>가상환경 경로</p><ul><li><code>/home/ubuntu/www/&lt;project name>/&lt;가상환경 이름></code></li><li>ex) 가상환경 이름: venv</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#ae81ff>ubuntu@ip-172-31-3-151:~/www/ls-django$ v </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ubuntu@ip-172-31-3-151:~/www/ls-django$ source ./venv/bin/activate</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>(venv) ubuntu@ip-172-31-3-151:~/www/ls-django$</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>장고 패키지 설치하기</p><ul><li>이미 만들어 놓은 프로젝트를 git clone 경우 이기 때문에 <code>requirements.txt</code> 가 이미 존재한다. 그래서 <code>pip install -r requirements.txt</code> 를 실행하면 자동적으로 장고 패키지들이 설치된다.</li></ul></li></ul><p> </p><hr><h1 id=6-ec2-public-ipv4와-django-server-연결>6. EC2 public IPv4와 django server 연결<a hidden class=anchor aria-hidden=true href=#6-ec2-public-ipv4와-django-server-연결>#</a></h1><ul><li><p><code>python manage.py runserver 0:8000</code> 을 입력하여 실행해보자.</p><ul><li><code>0:8000</code>을 입력하지 않으면 EC2 인스턴스의 public IPv4를 사용할 수 없다.</li></ul></li><li><p>위 명령어를 실행한 후, 브라우저 url 창에 <code>&lt;public IP address>:8000</code>을 입력했을 때, 다음과 같은 Error가 뜨면 잘된 것.</p><ul><li>위 8000번을 사용하기 위해서 인바운드 그룹에 추가했다.</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#ae81ff>DisallowedHost at /</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Invalid HTTP_HOST header</span>: <span style=color:#e6db74>&#39;13.125.32.21:8000&#39;</span><span style=color:#ae81ff>. </span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>You may need to add &#39;13.125.32.21&#39; to ALLOWED_HOSTS.</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>그러면 Host 부분을 수정하기 위해 <code>vi settings.py</code>를 입력하여, <code>ALLOWED_HOST</code> 부분을 다음과 같이 수정해보자.</p><ul><li><code>ALLOWED_HOST = ['*']</code></li></ul></li><li><p><code>python manage.py runserver 0:8000</code> 실행 후, <code>&lt;public IP address>:8000</code> 을 입력하면 정상적으로 화면이 나타난다.</p></li></ul><p>🔆 uwsgi 를 설치하지 않아도, 화면이 정상적으로 뜬다. 하지만 이 경우, uwsgi가 없기 때문에 nginx 와 연결될 수 없다.</p><p> </p><hr><h1 id=7-uwsgi-설치-및-적용하기>7. uWSGI 설치 및 적용하기<a hidden class=anchor aria-hidden=true href=#7-uwsgi-설치-및-적용하기>#</a></h1><ul><li>local에서 하는 게 아니기 때문에 uwsgi를 반드시 설치해야 한다.</li><li>uwsgi 설명: 파이썬으로 된 장고 프로젝트를 실행하는 역할을 한다.</li></ul><h2 id=uwsgi-installation>uWSGI installation<a hidden class=anchor aria-hidden=true href=#uwsgi-installation>#</a></h2><ul><li>uWSGI 설치 명령어<ul><li><code>pip install uwsgi</code></li><li>만약 uwsgi가 설치되지 않는다면 아래 명령어를 실행하지 않은 것이다.</li><li><code>sudo apt-get install python3.9 python3.9-dev</code></li></ul></li></ul><p> </p><h2 id=uwsgi-파일-수정-및-적용>uWSGI 파일 수정 및 적용<a hidden class=anchor aria-hidden=true href=#uwsgi-파일-수정-및-적용>#</a></h2><h3 id=uwsgi-파일-수정>uWSGI 파일 수정<a hidden class=anchor aria-hidden=true href=#uwsgi-파일-수정>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># 경로: /home/ubuntu/www/ls-django</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ mkdir .conf</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ cd .conf</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 아래 명령어를 입력하여, 생성 및 내용 입력</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ vi uwsgi.ini </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## uwsgi.ini</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 아래 내용 입력 후 esc → `:wq!` 눌러 저장 종료한다. </span>
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>uwsgi]</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 아래 3가지 변수는 장고가 uWSGI를 실행할 수 있는 환경을 만들어주는 것</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>chdir = /home/ubuntu/www/ls-django</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>module = config.wsgi:application</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>home = /home/ubuntu/www/ls-django/venv</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>socket = /tmp/app.sock</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>chmod-socket = 666</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>vacuum = true</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>master = true</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>daemonize = /home/ubuntu/www/ls-django/uwsgi.log</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><p><strong>uwsgi 내부 변수 설명</strong></p><ul><li>django가 uWSGI를 실행할 수 있는 환경을 만들어주는 변수 3가지<ul><li><strong>chdir</strong> : django project 경로</li><li><strong>module</strong> : django project wsgi module 위치</li><li><strong>home</strong> : 가상환경 위치</li></ul></li><li><strong>socket</strong> : IP 네트워크로도 이용할 수 있으나, 같은 os에 있는 프로세스 있으므로 이럴 때는 소켓을 사용하여 속도 개선을 한다.<ul><li>동일 서버 내 요청을 중개하는 것으로 소켓 전송 방식으로 진행</li><li>대부분 이런 방식을 사용한다.</li></ul></li><li><strong>chmod-socket</strong> : 권한 부여</li><li><strong>vacuum</strong> : uWSGI 통하여 생성된 파일을 삭제하는 옵션</li><li><strong>master</strong> : uWSGI 프로세스를 master로 동작하도록 하는 옵션</li><li><strong>daemonize</strong> : 백그라운드로 동작하기 위한 옵션이며, log file을 남길 경로 지정<ul><li>log file이란 <code>uwsgi.log</code> 를 의미</li></ul></li></ul></li><li><p>실제로는 더 많은 옵션들이 존재하므로, 더 찾아보자.</p></li></ul><p> </p><h3 id=uwsgi-파일-적용>uWSGI 파일 적용<a hidden class=anchor aria-hidden=true href=#uwsgi-파일-적용>#</a></h3><ul><li><code>uwsgi --ini uwsgi.ini</code> 명령어를 통해 변경된 설정값을 적용한다.<ul><li><strong>변경된 설정값을 적용하는 명령어</strong></li></ul></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># 경로: www/ls-django/.conf</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>$ uwsgi --ini uwsgi.ini</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 실행결과</span>
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>uWSGI] getting INI configuration from uwsgi.ini </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 그리고, uwsgi.log 가 생성될 것이다.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 이 log를 확인하는 방법은 tail -f uwsgi.log 를 실행한다.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -f 의 의미는 log에 새로 생기면 바로 출력된다는 걸 의미한다. </span>
</span></span></code></pre></td></tr></table></div></div><p> </p><h2 id=-uwsgi-과정에서-발생한-error-정리>🔆 uWSGI 과정에서 발생한 Error 정리<a hidden class=anchor aria-hidden=true href=#-uwsgi-과정에서-발생한-error-정리>#</a></h2><h3 id=case-1>Case 1<a hidden class=anchor aria-hidden=true href=#case-1>#</a></h3><ul><li>만약 위 명령어를 입력했을 때 다음과 같은 Error가 뜬다면 다음과 같은 절차로 확인한다.<ul><li><code>Command 'uwsgi' not found, but can be installed with:</code></li><li>첫 번째, 가상환경이 활성화되어 있는지 확인하라.</li><li>두 번째, <code>pip install uwsgi</code>을 실행했는지 생각해라.</li></ul></li></ul><p> </p><h3 id=case-2>Case 2<a hidden class=anchor aria-hidden=true href=#case-2>#</a></h3><ul><li>만약 다른 Error로 다음과 같이 뜬다면 경로를 <code>uwsgi.ini</code> file이 있는 경로로 이동하라.<ul><li><code>realpath() of uwsgi.ini failed: No such file or directory [core/utils.c line 3662]</code></li></ul></li><li>만약 또 다른 다음 Error가 뜬다면 <code>uwsgi.ini</code> 에 입력한 프로젝트 경로에 root를 입력하지 않은 것이니, 수정하라.<ul><li>수정 전: <code>home/ubuntu/www/ls-django/uwsgi.log</code></li><li>수정 전: <code>/home/ubuntu/www/ls-django/uwsgi.log</code></li></ul></li></ul><p> </p><h3 id=로그-확인>로그 확인<a hidden class=anchor aria-hidden=true href=#로그-확인>#</a></h3><ul><li><p><code>uwsgi --ini uwsgi.ini</code> 의 실행 결과, <code>uwsgi.log</code>가 생성된다.</p></li><li><p><code>tail -f uwsgi.log</code>를 실행하여 로그를 확인할 수 있다.</p><ul><li><code>-f</code>의 의미: follow의 약어로서, 계속해서 파일의 상태를 감시하며 파일에 내용이 뒤에 추가될 때마다 새로 추가된 내용을 보여준다.</li></ul></li></ul><p> </p><hr><h1 id=8-nginx-설치-및-적용하기>8. NGINX 설치 및 적용하기<a hidden class=anchor aria-hidden=true href=#8-nginx-설치-및-적용하기>#</a></h1><h2 id=nginx-설치하기>nginx 설치하기<a hidden class=anchor aria-hidden=true href=#nginx-설치하기>#</a></h2><p>Nginx 설치 명령어 실행하기</p><ul><li><code>sudo apt-get install nginx</code></li></ul><p> </p><h2 id=nginxconf-수정하기>nginx.conf 수정하기<a hidden class=anchor aria-hidden=true href=#nginxconf-수정하기>#</a></h2><blockquote><p><strong><em>Nginx를 수정하기 위해서는 프로젝트 내부 파일이 아니기 때문에 &lsquo;sudo&rsquo;를 사용해야 한다.</em></strong></p></blockquote><p>아래 경로 파일 두 가지를 수정할 것이다.</p><ul><li><p><code>/etc/nginx/nginx.conf</code></p><ul><li><code>sudo vi /etc/nginx/nginx.conf</code></li><li>만약 위 명령어를 입력 시, tab을 눌렀는데 위 단어들이 안나오면 nignx가 설치되지 않은 것이기 때문에 <code>sudo apt-get install nginx</code> 명령어를 실행하자.</li></ul></li><li><p><code>/etc/nginx/sites-enabled/default</code></p><ul><li><code>sudo vi /etc/nginx/sites-enabled/default</code></li></ul></li></ul><p> </p><h3 id=nginx에-uwsgi-socket-연결하기>nginx에 uWSGI socket 연결하기<a hidden class=anchor aria-hidden=true href=#nginx에-uwsgi-socket-연결하기>#</a></h3><blockquote><p><strong><em>nginx 안에 uWSGI 소켓을 입력하여 연결시킨다. 그래서 Nginx를 설치하기 전에 uWSGI를 먼저 설치했다.</em></strong></p></blockquote><ul><li>uWSGI에서 소켓을 열었다.<ul><li>이를 어떻게 알 수 있냐면 uwsgi file의 <code>socket = /tmp/app.sock</code>이 바로 소켓을 열었다는 의미다.</li></ul></li><li>이 path를 아래에 나와있다시피 location에 추가하여 연결하자.</li><li>그리고, uwsgi의 parameters(params)를 포함시키자.</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e>## 다음 경로 파일 두 가지의 내용 값을 아래와 같이 수정하기</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 파일 경로: /etc/nginx/nginx.conf</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>user ubuntu;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 파일 경로: /etc/nginx/sites-enabled/default</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>location / { </span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>uwsgi_pass     unix:///tmp/app.sock;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>include        uwsgi_params;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p> </p><h3 id=nginx와-uwsgi가-어떻게-연결되는가>nginx와 uwsgi가 어떻게 연결되는가?<a hidden class=anchor aria-hidden=true href=#nginx와-uwsgi가-어떻게-연결되는가>#</a></h3><p>파일 경로: /etc/nginx/sites-enabled/default 내용을 살펴보자.</p><p>포트번호 80을 보고 있다가, 일로 들어온 url 경로가 <code>/</code> 면 location / { } 의 내부 내용 중 uwsgi_pass로 전달해준다. uwsgi가 django app을 실행한다.</p><ul><li>location 옆은 url 주소를 의미하고, 내부는 url 주소에 대응되는 프로젝트 디렉토리 경로를 의미</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Default server configuration</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>server {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>listen 80 default_server;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>listen [::]:80 default_server;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>				<span style=color:#ae81ff>root /var/www/html;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>index index.html index.htm index.nginx-debian.html;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>server_name _;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>location / {</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>uwsgi_pass  unix:///tmp/app.sock;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>include     uwsgi_params;</span>
</span></span><span style=display:flex><span>				}
</span></span></code></pre></td></tr></table></div></div><p>그래서 httprequest가 들어오면 NGINX가 uWSGI로 전달해준다.</p><p>static file을 실행시켜주는 것도 위에 location에서 실행한다.</p><p> </p><h2 id=nginx-적용하기>nginx 적용하기<a hidden class=anchor aria-hidden=true href=#nginx-적용하기>#</a></h2><p>위 내용을 파일에 입력했으면 다음 명령어 2가지를 실행한다.</p><ul><li><code>sudo service nginx reload</code>: nginx 재적용</li><li><code>sudo service nginx status</code>: nginx 상태 확인</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>ubuntu@ip-172-31-3-151:~$ sudo service nginx reload</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>ubuntu@ip-172-31-3-151:~$ sudo service nginx status</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>nginx.service - A high performance web server and a reverse proxy server</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Loaded</span>: <span style=color:#ae81ff>loaded (/lib/systemd/system/nginx.service; enabled; vendor preset:&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Active</span>: <span style=color:#ae81ff>active (running) since Thu 2022-10-13 16:55:50 UTC; 12h ago</span>
</span></span><span style=display:flex><span>       <span style=color:#f92672>Docs</span>: <span style=color:#ae81ff>man:nginx(8)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Process</span>: <span style=color:#ae81ff>24456</span> <span style=color:#ae81ff>ExecReload=/usr/sbin/nginx -g daemon on; master_process on; &gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>Main PID</span>: <span style=color:#ae81ff>21207</span> <span style=color:#ae81ff>(nginx)</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Tasks: 2 (limit</span>: <span style=color:#ae81ff>1143</span><span style=color:#ae81ff>)</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>Memory</span>: <span style=color:#ae81ff>7.</span><span style=color:#ae81ff>9M</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>CGroup</span>: <span style=color:#ae81ff>/system.slice/nginx.service</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>├─21207 nginx</span>: <span style=color:#ae81ff>master process /usr/sbin/nginx -g daemon on; master&gt;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>└─24457 nginx</span>: <span style=color:#ae81ff>worker process</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>Oct 13 16:55:50 ip-172-31-3-151 systemd[1]</span>: <span style=color:#ae81ff>Starting A high performance web ser&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Oct 13 16:55:50 ip-172-31-3-151 systemd[1]</span>: <span style=color:#ae81ff>Started A high performance web serv&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Oct 14 05:21:09 ip-172-31-3-151 systemd[1]</span>: <span style=color:#ae81ff>Reloading A high performance web se&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Oct 14 05:21:09 ip-172-31-3-151 systemd[1]</span>: <span style=color:#ae81ff>Reloaded A high performance web ser&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>lines 1-16/16 (END)</span>
</span></span></code></pre></td></tr></table></div></div><p>위에 <code>sudo service nginx reload</code> 를 실행한 결과, <code>:8000</code>을 입력하지 않고, <code>python manage.py runserver</code>를 하지 않고 public IPv4 만 입력해도 애플리케이션을 불러올 수 있다.</p><p>하지만, css가 전혀 적용되지 않는다.</p><p>이를 직접 보고 싶으면 불러온 사이트의 inspection tool로 들어가서 Network > CSS 를 클릭하면 status code를 보고 알 수 있다.</p><p> </p><hr><h1 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h1><ul><li><a href=https://learningspoons.com/course/detail/django-backend/>러닝스푼즈 - 나노디그리 Python & Django backed course</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://jeha00.github.io/tags/django/>Django</a></li></ul><nav class=paginav><a class=prev href=http://jeha00.github.io/post/django/deployment/deployment-with-nginx-uwsgi-ec2_2/><span class=title>« Prev Page</span><br><span>Django study: nginx와 uwsgi를 사용한 django application deployment 02 - 502 Bad Gateway Error</span></a>
<a class=next href=http://jeha00.github.io/post/bookstudy/cleancode/chatper02_name/><span class=title>Next Page »</span><br><span>Clean Code: Chapter 02 변수</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기 on twitter" href="https://twitter.com/intent/tweet/?text=Django%20study%3a%20nginx%ec%99%80%20uwsgi%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%9c%20django%20application%20deployment%2001%20-%20nginx%ec%99%80%20uwsgi%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0&url=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdeployment%2fdeployment-with-nginx-uwsgi-ec2_1%2f&hashtags=Django"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdeployment%2fdeployment-with-nginx-uwsgi-ec2_1%2f&title=Django%20study%3a%20nginx%ec%99%80%20uwsgi%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%9c%20django%20application%20deployment%2001%20-%20nginx%ec%99%80%20uwsgi%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0&summary=Django%20study%3a%20nginx%ec%99%80%20uwsgi%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%9c%20django%20application%20deployment%2001%20-%20nginx%ec%99%80%20uwsgi%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0&source=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdeployment%2fdeployment-with-nginx-uwsgi-ec2_1%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기 on reddit" href="https://reddit.com/submit?url=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdeployment%2fdeployment-with-nginx-uwsgi-ec2_1%2f&title=Django%20study%3a%20nginx%ec%99%80%20uwsgi%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%9c%20django%20application%20deployment%2001%20-%20nginx%ec%99%80%20uwsgi%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기 on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdeployment%2fdeployment-with-nginx-uwsgi-ec2_1%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기 on whatsapp" href="https://api.whatsapp.com/send?text=Django%20study%3a%20nginx%ec%99%80%20uwsgi%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%9c%20django%20application%20deployment%2001%20-%20nginx%ec%99%80%20uwsgi%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0%20-%20http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdeployment%2fdeployment-with-nginx-uwsgi-ec2_1%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Django study: nginx와 uwsgi를 사용한 django application deployment 01 - nginx와 uwsgi 연결하기 on telegram" href="https://telegram.me/share/url?text=Django%20study%3a%20nginx%ec%99%80%20uwsgi%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%9c%20django%20application%20deployment%2001%20-%20nginx%ec%99%80%20uwsgi%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0&url=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdeployment%2fdeployment-with-nginx-uwsgi-ec2_1%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://jeha00.github.io/>Jeha DevLog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>