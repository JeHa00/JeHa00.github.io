<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet | Jeha DevLog</title><meta name=keywords content="Django"><meta name=description content="API url을 만드는 방법으로 APIView, @api_view() 그리고 ModelViewSet을 사용한다. 이 방법들 중에서 자주 사용하는 방식은 APIView다. ModelViewSet은 중복을 방지하여 여러 url들을 만들어주지만, 최적화가 어렵기 때문이다."><meta name=author content><link rel=canonical href=http://jeha00.github.io/post/django/drf/drf_study02/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.268b216eea772711d318d156ce02a8190962367a0bf469fa9a959114ea6b9ca3.css integrity="sha256-Joshbup3JxHTGNFWzgKoGQliNnoL9Gn6mpWRFOprnKM=" rel="preload stylesheet" as=style><link rel=icon href=http://jeha00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://jeha00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://jeha00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=http://jeha00.github.io/apple-touch-icon.png><link rel=mask-icon href=http://jeha00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet"><meta property="og:description" content="API url을 만드는 방법으로 APIView, @api_view() 그리고 ModelViewSet을 사용한다. 이 방법들 중에서 자주 사용하는 방식은 APIView다. ModelViewSet은 중복을 방지하여 여러 url들을 만들어주지만, 최적화가 어렵기 때문이다."><meta property="og:type" content="article"><meta property="og:url" content="http://jeha00.github.io/post/django/drf/drf_study02/"><meta property="og:image" content="http://jeha00.github.io/47"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-11-05T13:36:56+09:00"><meta property="article:modified_time" content="2022-11-05T13:36:56+09:00"><meta property="og:site_name" content="JeHa00 DevLog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://jeha00.github.io/47"><meta name=twitter:title content="Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet"><meta name=twitter:description content="API url을 만드는 방법으로 APIView, @api_view() 그리고 ModelViewSet을 사용한다. 이 방법들 중에서 자주 사용하는 방식은 APIView다. ModelViewSet은 중복을 방지하여 여러 url들을 만들어주지만, 최적화가 어렵기 때문이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://jeha00.github.io/post/"},{"@type":"ListItem","position":2,"name":"Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet","item":"http://jeha00.github.io/post/django/drf/drf_study02/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet","name":"Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet","description":"API url을 만드는 방법으로 APIView, @api_view() 그리고 ModelViewSet을 사용한다. 이 방법들 중에서 자주 사용하는 방식은 APIView다. ModelViewSet은 중복을 방지하여 여러 url들을 만들어주지만, 최적화가 어렵기 때문이다.","keywords":["Django"],"articleBody":"0. Introduction 해당 강의는 러닝스푼즈 - 나노디그리 Python \u0026 Django backed course의 김형종 강사님의 django 강의를 학습한 내용입니다.\n그리고, Django REST framework를 함께 참고하여 학습했습니다.\n이번에는 django의 외부 라이브러리인 DRF(Django Rest-Framework)에 대해 학습한 걸 정리했습니다.\nDRF와 DRF의 핵심인 직렬화가 무엇인지 어떤 흐름으로 설계를 진행하는지 ModelViewSet, @api_view, ViewSet 각각으로 view를 만드는 방법 Serializer 설계 DRF 강의 내용을 정리한 이유는 DRF는 api 설계에 주로 사용하기 때문에, 정답이라는 게 없어서 많이 사용하는 내용을 정리할 필요를 느꼈습니다.\n1. DRF의 이점 모든 것을 DRF로 구현하는 게 아닌, DRF 기능 중 선별적으로 필요한 것만 골라서 사용한다.\n최종적으로는 API를 만드는 것이지만, 구체적으로는 다음과 같다. 하지만, 아래 언급한 기능 외에도 매우 많은 기능들이 있으므로, 아래 기능들을 기본으로 살을 붙여나가자.\n첫 번째, Serializer 두 번째, Response 세 번째, APIView 네 번째, Policy DRF - Serializer json library는 json으로 직렬화가 가능하지만, Django object까지는 처리하지 못한다.\nDRF - Response DRF의 모든 기능을 사용하여 API를 만드는 게 아니라, DRF의 기능을 선별적으로 사용한다. 1 2 3 4 5 ## django에서는 다음 모듈을 사용 from django.http import JsonResponse ## DRF에서는 다음 모듈을 사용 from rest_framework.response import Response DRF - APIView DRF로 API를 만들 때 사용하는 방법들 3가지: APIView, @api_view, ModelViewSet\nAPIView 1 2 3 4 5 # CBV # TemplateView와 유사 class LessonAPIView(APIView): def get(self, request): return @api_view([“GET”]]) 1 2 3 4 # FBV @api_view([\"GET\"]) def get_lesson(request): return ModelViewSet 상속 1 2 3 4 5 # DRF에서 제공하는 ModelViewSet # FormView와 유사 class LessonViewSet(ModelViewSet): queryset = Lesson.objects.all() serializer_class = LessonSerializer DRF - Policy DRF에서 제공하는 유용한 기능 ‘Policy’\nauthentication_classes \u0026 permission_classes\napi 서버에 접근하여 가져올 때, 권한 부여 pagination_class\npagination 만들기 throttle_scope\napi를 다룰 때 횟수 제한이 있다. 이 횟수제한을 다루는 기능 2. DRF에 사용할 models.py 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 from django.db import models from django.contrib.auth.models import User class Company(models.Model): SCALES = [(0, \"10명미만\"), (1, \"50명미만\"), (2, \"100명미만\"), (3, \"300명미만\"), (4, \"500명미만\")] name = models.CharField(verbose_name=\"회사명\", max_length=30) scale = models.IntegerField(verbose_name=\"규모\", choices=SCALES, null=True) def __str__(self): return f\"{self.name} ({self.get_scale_display()})\" class Meta: verbose_name = \"회사\" verbose_name_plural = \"회사 목록\" class Employee(models.Model): company = models.ForeignKey(Company, on_delete=models.CASCADE, verbose_name=\"소속(회사)\") user = models.OneToOneField(User, on_delete=models.CASCADE, verbose_name=\"유저\") name = models.CharField(verbose_name=\"이름\", max_length=10) phone = models.CharField(verbose_name=\"연락처\", max_length=11) team = models.CharField(verbose_name=\"소속(팀)\", max_length=30) is_agreed = models.BooleanField(verbose_name=\"이용약관 동의\", default=False) def __str__(self): return f\"{self.name} ({self.company})\" class Meta: verbose_name = \"임직원\" verbose_name_plural = \"임직원 목록\" 3. View 설계: APIView APIView를 사용하여 View를 설계해보고, django에서 제공하는 JsonResponse와 DRF에서 제공하는 Response를 비교해본다.\n3.1: from django.http import JsonResponse 3.2: from rest_framework.response import Response 3.3: 직렬화 추가 🔆 url에 매핑하는 방식은 기존 CBV 방식과 동일하다.\n3.1 JsonResponse TypeError: Object of type Queryset is not JSON serializable 위 모델들이 바로 직렬화가 안되면 이 모델들을 dictionary 형태로 바꾸고 나서 직렬화를 진행하면 가능하다. 이를 아래 view 코드를 통해서 확인해보자. 아래 result의 결과는 Json 직렬화를 할 수 없다는 Error가 발생한다. TypeError: Object of type QuerySet is not JSON serializable 왜냐하면 queryset은 jsonresponse로 던질 수 있는 적합한 타입이 아니다. queryset은 파이썬이 아닌 장고에서 만든 것이다. 그래서 파이썬에서 만들 수 있는 자료형으로 형변환 후, 이를 JsonResponse에 전달한다. 1 2 3 4 5 6 7 8 9 10 11 # user/views.py from rest_framework.views import APIView from django.http import JsonResponse class EmployeeListAPIView(APIView): def get(self, request): employee_qs = Employee.objects.all() result = {\"employee_list\": employee_qs} return JsonResponse(result) queryset을 다른 data type으로 변환 후, 직렬화하기 그래서 위 내용을 다음과 같이 python의 다른 형태로 형변환하면 화면 상에서 볼 수 있다. 1 2 3 4 5 6 7 8 9 10 11 12 # user/views.py from rest_framework.views import APIView from django.http import JsonResponse class EmployeeListAPIView(APIView): def get(self, request): employee_qs = Employee.objects.all() # 아래처럼 입력하면 employee_list 라는 key 값에 value가 list형태인 것으로 직렬화되어 출력된다. result = {\"employee_list\": list(employee_qs.values_list('name', flat=True))} return JsonResponse(result) 3.2 Response 아래 코드를 기반으로 화면을 보면 위에 JsonResponse와 달리 Http message 형태로 볼 수 있다. 1 2 3 4 5 6 7 8 9 10 11 from rest_framework.views import APIView from rest_framework.response import Response class EmployeeListAPIView(APIView): def get(self, request): employee_qs = Employee.objects.all() # 아래처럼 입력하면 employee_list 라는 key 값에 value가 list형태인 것으로 직렬화되어 출력된다. result = {\"employee_list\": list(employee_qs.values_list('name', flat=True))} return Response(result) 3.3 Serializers 추가하기 먼저 ./serializers.py에서 EmployeeSerializer 를 만든다.\n1 2 3 4 5 6 7 8 from rest_framework.serializers import ModelSerializer from user.models import Employee class EmployeeSerializer(ModelSerializer): class Meta: model = Employee fields = \"__all__\" 그리고 이를 APIView에 추가한다.\n1 2 3 4 5 6 7 8 9 10 from rest_framework.views import APIView from rest_framework.response import Response class EmployeeListAPIView(APIView): def get(self, request): employee_qs = Employee.objects.all() serializer = EmployeeSerializer(employee_qs, many=True) return Response(serializer) 결과는 2.2 Response 방식과 동일하다.\n하지만, 코드는 보다 간결해진 걸 알 수 있다.\n만약 모든 필드가 아닌 원하는 필드면 입력하여 뽑아낼 수 있다.\nfields = '__all__'이 아닌 fields = ['name']을 입력하면 ’name’에 관련된 것만 가져온다.\n4. View 설계: @api_view([’’]) @api_view([''])를 사용하여 위에 CBV로 만든 것과 내용을 동일하게 하면서 FBV로 만들어보겠다.\n데코레이터의 인자로는 리스트 데이터 타입으로 입력해야 한다.\n1 2 3 4 5 6 7 8 9 from rest_framework.serializers import ModelSerializer from rest_framework.decorators import api_view from user.models import Employee @api_view(['GET']) def employee_list(request): employee_qs = Employee.objects.all() serializer = EmployeeSerializer(employee_qs, many=True) return Response(serializer.data) 🔆 url에 매핑하는 방식은 기존 FBV 방식과 동일하다.\n5. View 설계: ViewSet CBV 방식으로서, naming은 class ViewSet(ModelViewSet):로 한다.\nModelViewSet을 받아서 ViewSet을 만든다. 이 때 2가지 옵션을 단다. queryset, serializer_class 를 만든다. queryset 은 \u003c모델명\u003e.objects.all() 을 만들어 할당한다. serializer_class에 해당하는 건 \u003c모델명\u003eSerailizer로 작성한다. 1 2 3 4 5 6 7 8 # course/views.py from rest_framework.viewsets import ModelViewSet from .serialization import EmployeeSerializer class EmployeeViewSet(ModelViewSet): queryset = Course.objects.all() serializer_class = EmployeeSerializer url에 mapping 하기 일반적인 cbv 방식과 달리 다음과 같이 DefaultRouter를 가져온다.\nRouter의 역할 router는 nginx처럼 여러 군데로 보내는 역할을 수행한다.\nrouter를 만들어서 여기에 .register를 사용하여 등록했다.\nrouter가 ModelViewSet을 사용하여 url를 여러개 만들어주는 역할을 한다.\nurl 뒤에 pk 입력하는 url 설계는 하지 않았음에도 불구하고, 뒤에 pk를 입력하면 해당되는 데이터가 뜬다. router.register의 수는 ModelViewSet으로 만들고 싶은 Model의 갯수만큼 입력한다.\n1 2 3 4 5 6 7 8 9 10 11 # users/views.py from django.urls import path, include from rest_framework.routers import DefaultRouter from .views import EmployeeViewSet router = DefaultRouter() router.register('employee', EmployeeViewSet) urlpatterns = [ path(\"\", include(router.urls)) ] 6. 자주 사용되는 view 설계 ViewSet보다 APIView를 훨씬 많이 사용한다.\nFormView를 잘 사용하지 않는 이유\n요구사항이 바껴서 적용하기 힘들 때, form에 post를 전달하는 것 대신에 Ajax로 API를 체크한다. ModelViewSet을 잘 사용하지 않는 이유: 최적화의 어려움\nModelViewSet으로는 API를 자세하게 다룰 수 없어서, APIView를 주로 사용한다. 왜냐하면 ModelViewSet에는 CRUD가 다 존재하기 때문이다. Reference 러닝스푼즈 - 나노디그리 Python \u0026 Django backed course ","wordCount":"1055","inLanguage":"en","datePublished":"2022-11-05T13:36:56+09:00","dateModified":"2022-11-05T13:36:56+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://jeha00.github.io/post/django/drf/drf_study02/"},"publisher":{"@type":"Organization","name":"Jeha DevLog","logo":{"@type":"ImageObject","url":"http://jeha00.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://jeha00.github.io/ accesskey=h title="@Jeha00 (Alt + H)">@Jeha00</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=http://jeha00.github.io/me/ title=About><span>About</span></a></li><li><a href=http://jeha00.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=http://jeha00.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://jeha00.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://jeha00.github.io/>Home</a>&nbsp;»&nbsp;<a href=http://jeha00.github.io/post/>Posts</a></div><h1 class=post-title>Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet</h1><div class=post-meta><span title='2022-11-05 13:36:56 +0900 KST'>November 5, 2022</span>&nbsp;|&nbsp;<a href=https://github.com/JeHa00/blog/content/post/Django/DRF/DRF_study02.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#0-introduction aria-label="0. Introduction">0. Introduction</a></li><li><a href=#1-drf%ec%9d%98-%ec%9d%b4%ec%a0%90 aria-label="1. DRF의 이점">1. DRF의 이점</a><ul><li><a href=#drf---serializer aria-label="DRF - Serializer">DRF - Serializer</a></li><li><a href=#drf---response aria-label="DRF - Response">DRF - Response</a></li><li><a href=#drf---apiview aria-label="DRF - APIView">DRF - APIView</a><ul><li><a href=#apiview aria-label=APIView>APIView</a></li><li><a href=#api_viewget aria-label=@api_view([&amp;ldquo;GET&amp;rdquo;]])>@api_view([&ldquo;GET&rdquo;]])</a></li><li><a href=#modelviewset-%ec%83%81%ec%86%8d aria-label="ModelViewSet 상속">ModelViewSet 상속</a></li><li><a href=#drf---policy aria-label="DRF - Policy">DRF - Policy</a></li></ul></li></ul></li><li><a href=#2-drf%ec%97%90-%ec%82%ac%ec%9a%a9%ed%95%a0-modelspy aria-label="2. DRF에 사용할 models.py">2. DRF에 사용할 models.py</a></li><li><a href=#3-view-%ec%84%a4%ea%b3%84-apiview aria-label="3. View 설계: APIView">3. View 설계: APIView</a><ul><li><a href=#31-jsonresponse aria-label="3.1 JsonResponse">3.1 JsonResponse</a><ul><li><a href=#typeerror-object-of-type-queryset-is-not-json-serializable aria-label="TypeError: Object of type Queryset is not JSON serializable">TypeError: Object of type Queryset is not JSON serializable</a></li><li><a href=#queryset%ec%9d%84-%eb%8b%a4%eb%a5%b8-data-type%ec%9c%bc%eb%a1%9c-%eb%b3%80%ed%99%98-%ed%9b%84-%ec%a7%81%eb%a0%ac%ed%99%94%ed%95%98%ea%b8%b0 aria-label="queryset을 다른 data type으로 변환 후, 직렬화하기">queryset을 다른 data type으로 변환 후, 직렬화하기</a></li></ul></li><li><a href=#32-response aria-label="3.2 Response">3.2 Response</a></li><li><a href=#33-serializers-%ec%b6%94%ea%b0%80%ed%95%98%ea%b8%b0 aria-label="3.3 Serializers 추가하기">3.3 Serializers 추가하기</a></li></ul></li><li><a href=#4-view-%ec%84%a4%ea%b3%84-api_view aria-label="4. View 설계: @api_view([&amp;rsquo;&amp;rsquo;])">4. View 설계: @api_view([&rsquo;&rsquo;])</a></li><li><a href=#5-view-%ec%84%a4%ea%b3%84-viewset aria-label="5. View 설계: ViewSet">5. View 설계: ViewSet</a><ul><li><a href=#url%ec%97%90-mapping-%ed%95%98%ea%b8%b0 aria-label="url에 mapping 하기">url에 mapping 하기</a><ul><li><a href=#router%ec%9d%98-%ec%97%ad%ed%95%a0 aria-label="Router의 역할">Router의 역할</a></li></ul></li></ul></li><li><a href=#6-%ec%9e%90%ec%a3%bc-%ec%82%ac%ec%9a%a9%eb%90%98%eb%8a%94-view-%ec%84%a4%ea%b3%84 aria-label="6. 자주 사용되는 view 설계">6. 자주 사용되는 view 설계</a></li><li><a href=#reference aria-label=Reference>Reference</a></li></ul></div></details></div><div class=post-content><h1 id=0-introduction>0. Introduction<a hidden class=anchor aria-hidden=true href=#0-introduction>#</a></h1><ul><li><p>해당 강의는 <a href=https://learningspoons.com/course/detail/django-backend/>러닝스푼즈 - 나노디그리 Python & Django backed course</a>의 김형종 강사님의 django 강의를 학습한 내용입니다.</p></li><li><p>그리고, <a href=https://www.django-rest-framework.org/tutorial/>Django REST framework</a>를 함께 참고하여 학습했습니다.</p></li><li><p>이번에는 django의 외부 라이브러리인 DRF(Django Rest-Framework)에 대해 학습한 걸 정리했습니다.</p><ul><li>DRF와 DRF의 핵심인 직렬화가 무엇인지</li><li>어떤 흐름으로 설계를 진행하는지</li><li>ModelViewSet, @api_view, ViewSet 각각으로 view를 만드는 방법</li><li>Serializer 설계</li></ul></li><li><p>DRF 강의 내용을 정리한 이유는 DRF는 api 설계에 주로 사용하기 때문에, 정답이라는 게 없어서 많이 사용하는 내용을 정리할 필요를 느꼈습니다.</p></li></ul><p> </p><hr><h1 id=1-drf의-이점>1. DRF의 이점<a hidden class=anchor aria-hidden=true href=#1-drf의-이점>#</a></h1><p>모든 것을 DRF로 구현하는 게 아닌, DRF 기능 중 선별적으로 필요한 것만 골라서 사용한다.</p><p>최종적으로는 API를 만드는 것이지만, 구체적으로는 다음과 같다. 하지만, 아래 언급한 기능 외에도 매우 많은 기능들이 있으므로, 아래 기능들을 기본으로 살을 붙여나가자.</p><ul><li>첫 번째, Serializer</li><li>두 번째, Response</li><li>세 번째, APIView</li><li>네 번째, Policy</li></ul><h2 id=drf---serializer>DRF - Serializer<a hidden class=anchor aria-hidden=true href=#drf---serializer>#</a></h2><p>json library는 json으로 직렬화가 가능하지만, Django object까지는 처리하지 못한다.</p><h2 id=drf---response>DRF - Response<a hidden class=anchor aria-hidden=true href=#drf---response>#</a></h2><ul><li>DRF의 모든 기능을 사용하여 API를 만드는 게 아니라, DRF의 기능을 선별적으로 사용한다.</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4>## django에서는 다음 모듈을 사용</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> django.http <span style=color:#ff79c6>import</span> JsonResponse
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>## DRF에서는 다음 모듈을 사용</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.response <span style=color:#ff79c6>import</span> Response
</span></span></code></pre></td></tr></table></div></div><h2 id=drf---apiview>DRF - APIView<a hidden class=anchor aria-hidden=true href=#drf---apiview>#</a></h2><p>DRF로 API를 만들 때 사용하는 방법들 3가지: APIView, @api_view, ModelViewSet</p><h3 id=apiview>APIView<a hidden class=anchor aria-hidden=true href=#apiview>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># CBV</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># TemplateView와 유사</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>LessonAPIView</span>(APIView):
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get</span>(self, request):
</span></span><span style=display:flex><span>		<span style=color:#ff79c6>return</span>
</span></span></code></pre></td></tr></table></div></div><p> </p><h3 id=api_viewget>@api_view([&ldquo;GET&rdquo;]])<a hidden class=anchor aria-hidden=true href=#api_viewget>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># FBV</span>
</span></span><span style=display:flex><span>@api_view([<span style=color:#f1fa8c>&#34;GET&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_lesson</span>(request):
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>return</span> 
</span></span></code></pre></td></tr></table></div></div><p> </p><h3 id=modelviewset-상속>ModelViewSet 상속<a hidden class=anchor aria-hidden=true href=#modelviewset-상속>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># DRF에서 제공하는 ModelViewSet</span>
</span></span><span style=display:flex><span><span style=color:#6272a4># FormView와 유사</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>LessonViewSet</span>(ModelViewSet):
</span></span><span style=display:flex><span>	queryset <span style=color:#ff79c6>=</span> Lesson<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>all() 
</span></span><span style=display:flex><span>	serializer_class <span style=color:#ff79c6>=</span> LessonSerializer
</span></span></code></pre></td></tr></table></div></div><p> </p><h3 id=drf---policy>DRF - Policy<a hidden class=anchor aria-hidden=true href=#drf---policy>#</a></h3><p>DRF에서 제공하는 유용한 기능 &lsquo;Policy&rsquo;</p><ul><li><p>authentication_classes & permission_classes</p><ul><li>api 서버에 접근하여 가져올 때, 권한 부여</li></ul></li><li><p>pagination_class</p><ul><li>pagination 만들기</li></ul></li><li><p>throttle_scope</p><ul><li>api를 다룰 때 횟수 제한이 있다.</li><li>이 횟수제한을 다루는 기능</li></ul></li></ul><p> </p><hr><h1 id=2-drf에-사용할-modelspy>2. DRF에 사용할 models.py<a hidden class=anchor aria-hidden=true href=#2-drf에-사용할-modelspy>#</a></h1><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>from</span> django.db <span style=color:#ff79c6>import</span> models
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> django.contrib.auth.models <span style=color:#ff79c6>import</span> User
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Company</span>(models<span style=color:#ff79c6>.</span>Model):
</span></span><span style=display:flex><span>    SCALES <span style=color:#ff79c6>=</span> [(<span style=color:#bd93f9>0</span>, <span style=color:#f1fa8c>&#34;10명미만&#34;</span>), (<span style=color:#bd93f9>1</span>, <span style=color:#f1fa8c>&#34;50명미만&#34;</span>), (<span style=color:#bd93f9>2</span>, <span style=color:#f1fa8c>&#34;100명미만&#34;</span>), (<span style=color:#bd93f9>3</span>, <span style=color:#f1fa8c>&#34;300명미만&#34;</span>), (<span style=color:#bd93f9>4</span>, <span style=color:#f1fa8c>&#34;500명미만&#34;</span>)]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    name <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>CharField(verbose_name<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;회사명&#34;</span>, max_length<span style=color:#ff79c6>=</span><span style=color:#bd93f9>30</span>)
</span></span><span style=display:flex><span>    scale <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>IntegerField(verbose_name<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;규모&#34;</span>, choices<span style=color:#ff79c6>=</span>SCALES, null<span style=color:#ff79c6>=</span><span style=color:#ff79c6>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>def</span> __str__(self):
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#f1fa8c>f</span><span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>{</span>self<span style=color:#ff79c6>.</span>name<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c> (</span><span style=color:#f1fa8c>{</span>self<span style=color:#ff79c6>.</span>get_scale_display()<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>)&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Meta</span>:
</span></span><span style=display:flex><span>        verbose_name <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;회사&#34;</span>
</span></span><span style=display:flex><span>        verbose_name_plural <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;회사 목록&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Employee</span>(models<span style=color:#ff79c6>.</span>Model):
</span></span><span style=display:flex><span>    company <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>ForeignKey(Company, on_delete<span style=color:#ff79c6>=</span>models<span style=color:#ff79c6>.</span>CASCADE, verbose_name<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;소속(회사)&#34;</span>)
</span></span><span style=display:flex><span>    user <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>OneToOneField(User, on_delete<span style=color:#ff79c6>=</span>models<span style=color:#ff79c6>.</span>CASCADE, verbose_name<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;유저&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    name <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>CharField(verbose_name<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;이름&#34;</span>, max_length<span style=color:#ff79c6>=</span><span style=color:#bd93f9>10</span>)
</span></span><span style=display:flex><span>    phone <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>CharField(verbose_name<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;연락처&#34;</span>, max_length<span style=color:#ff79c6>=</span><span style=color:#bd93f9>11</span>)
</span></span><span style=display:flex><span>    team <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>CharField(verbose_name<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;소속(팀)&#34;</span>, max_length<span style=color:#ff79c6>=</span><span style=color:#bd93f9>30</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    is_agreed <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>BooleanField(verbose_name<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;이용약관 동의&#34;</span>, default<span style=color:#ff79c6>=</span><span style=color:#ff79c6>False</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>def</span> __str__(self):
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#f1fa8c>f</span><span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>{</span>self<span style=color:#ff79c6>.</span>name<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c> (</span><span style=color:#f1fa8c>{</span>self<span style=color:#ff79c6>.</span>company<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>)&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Meta</span>:
</span></span><span style=display:flex><span>        verbose_name <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;임직원&#34;</span>
</span></span><span style=display:flex><span>        verbose_name_plural <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;임직원 목록&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p> </p><hr><h1 id=3-view-설계-apiview>3. View 설계: APIView<a hidden class=anchor aria-hidden=true href=#3-view-설계-apiview>#</a></h1><p>APIView를 사용하여 View를 설계해보고, django에서 제공하는 JsonResponse와 DRF에서 제공하는 Response를 비교해본다.</p><ul><li>3.1: <code>from django.http import JsonResponse</code></li><li>3.2: <code>from rest_framework.response import Response</code></li><li>3.3: 직렬화 추가</li></ul><p>🔆 url에 매핑하는 방식은 기존 CBV 방식과 동일하다.</p><h2 id=31-jsonresponse>3.1 JsonResponse<a hidden class=anchor aria-hidden=true href=#31-jsonresponse>#</a></h2><h3 id=typeerror-object-of-type-queryset-is-not-json-serializable>TypeError: Object of type Queryset is not JSON serializable<a hidden class=anchor aria-hidden=true href=#typeerror-object-of-type-queryset-is-not-json-serializable>#</a></h3><ul><li>위 모델들이 바로 직렬화가 안되면 이 모델들을 dictionary 형태로 바꾸고 나서 직렬화를 진행하면 가능하다. 이를 아래 view 코드를 통해서 확인해보자.</li><li>아래 result의 결과는 Json 직렬화를 할 수 없다는 Error가 발생한다.<ul><li><code>TypeError: Object of type QuerySet is not JSON serializable</code></li></ul></li><li>왜냐하면 queryset은 jsonresponse로 던질 수 있는 적합한 타입이 아니다.<ul><li>queryset은 파이썬이 아닌 장고에서 만든 것이다.</li></ul></li><li>그래서 파이썬에서 만들 수 있는 자료형으로 형변환 후, 이를 JsonResponse에 전달한다.</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># user/views.py</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.views <span style=color:#ff79c6>import</span> APIView
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> django.http <span style=color:#ff79c6>import</span> JsonResponse 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>EmployeeListAPIView</span>(APIView):
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get</span>(self, request): 
</span></span><span style=display:flex><span>		employee_qs <span style=color:#ff79c6>=</span> Employee<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>all() 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		result <span style=color:#ff79c6>=</span> {<span style=color:#f1fa8c>&#34;employee_list&#34;</span>: employee_qs}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#ff79c6>return</span> JsonResponse(result)
</span></span></code></pre></td></tr></table></div></div><p> </p><h3 id=queryset을-다른-data-type으로-변환-후-직렬화하기>queryset을 다른 data type으로 변환 후, 직렬화하기<a hidden class=anchor aria-hidden=true href=#queryset을-다른-data-type으로-변환-후-직렬화하기>#</a></h3><ul><li>그래서 위 내용을 다음과 같이 python의 다른 형태로 형변환하면 화면 상에서 볼 수 있다.</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># user/views.py</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.views <span style=color:#ff79c6>import</span> APIView
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> django.http <span style=color:#ff79c6>import</span> JsonResponse 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>EmployeeListAPIView</span>(APIView):
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get</span>(self, request): 
</span></span><span style=display:flex><span>		employee_qs <span style=color:#ff79c6>=</span> Employee<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>all() 
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>		<span style=color:#6272a4># 아래처럼 입력하면 employee_list 라는 key 값에 value가 list형태인 것으로 직렬화되어 출력된다.</span>
</span></span><span style=display:flex><span>		result <span style=color:#ff79c6>=</span> {<span style=color:#f1fa8c>&#34;employee_list&#34;</span>: <span style=color:#8be9fd;font-style:italic>list</span>(employee_qs<span style=color:#ff79c6>.</span>values_list(<span style=color:#f1fa8c>&#39;name&#39;</span>, flat<span style=color:#ff79c6>=</span><span style=color:#ff79c6>True</span>))}
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		<span style=color:#ff79c6>return</span> JsonResponse(result)
</span></span></code></pre></td></tr></table></div></div><p> </p><h2 id=32-response>3.2 Response<a hidden class=anchor aria-hidden=true href=#32-response>#</a></h2><ul><li>아래 코드를 기반으로 화면을 보면 위에 JsonResponse와 달리 Http message 형태로 볼 수 있다.</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.views <span style=color:#ff79c6>import</span> APIView
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.response <span style=color:#ff79c6>import</span> Response
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>EmployeeListAPIView</span>(APIView):
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get</span>(self, request): 
</span></span><span style=display:flex><span>		employee_qs <span style=color:#ff79c6>=</span> Employee<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>all() 
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>		<span style=color:#6272a4># 아래처럼 입력하면 employee_list 라는 key 값에 value가 list형태인 것으로 직렬화되어 출력된다.</span>
</span></span><span style=display:flex><span>		result <span style=color:#ff79c6>=</span> {<span style=color:#f1fa8c>&#34;employee_list&#34;</span>: <span style=color:#8be9fd;font-style:italic>list</span>(employee_qs<span style=color:#ff79c6>.</span>values_list(<span style=color:#f1fa8c>&#39;name&#39;</span>, flat<span style=color:#ff79c6>=</span><span style=color:#ff79c6>True</span>))}
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		<span style=color:#ff79c6>return</span> Response(result)
</span></span></code></pre></td></tr></table></div></div><p> </p><h2 id=33-serializers-추가하기>3.3 Serializers 추가하기<a hidden class=anchor aria-hidden=true href=#33-serializers-추가하기>#</a></h2><p>먼저 <code>./serializers.py</code>에서 <code>EmployeeSerializer</code> 를 만든다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.serializers <span style=color:#ff79c6>import</span> ModelSerializer
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> user.models <span style=color:#ff79c6>import</span> Employee
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>EmployeeSerializer</span>(ModelSerializer):
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Meta</span>: 
</span></span><span style=display:flex><span>        model <span style=color:#ff79c6>=</span> Employee
</span></span><span style=display:flex><span>        fields <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;__all__&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>그리고 이를 APIView에 추가한다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.views <span style=color:#ff79c6>import</span> APIView
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.response <span style=color:#ff79c6>import</span> Response
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>EmployeeListAPIView</span>(APIView):
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get</span>(self, request): 
</span></span><span style=display:flex><span>		employee_qs <span style=color:#ff79c6>=</span> Employee<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>all() 
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>		serializer <span style=color:#ff79c6>=</span> EmployeeSerializer(employee_qs, many<span style=color:#ff79c6>=</span><span style=color:#ff79c6>True</span>)
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		<span style=color:#ff79c6>return</span> Response(serializer)
</span></span></code></pre></td></tr></table></div></div><p>결과는 <a href=#52-response>2.2 Response</a> 방식과 동일하다.</p><p>하지만, 코드는 보다 간결해진 걸 알 수 있다.</p><p>만약 모든 필드가 아닌 원하는 필드면 입력하여 뽑아낼 수 있다.</p><p><code>fields = '__all__'</code>이 아닌 <code>fields = ['name']</code>을 입력하면 &rsquo;name&rsquo;에 관련된 것만 가져온다.</p><p> </p><hr><h1 id=4-view-설계-api_view>4. View 설계: @api_view([&rsquo;&rsquo;])<a hidden class=anchor aria-hidden=true href=#4-view-설계-api_view>#</a></h1><p><code>@api_view([''])</code>를 사용하여 위에 CBV로 만든 것과 내용을 동일하게 하면서 FBV로 만들어보겠다.</p><p>데코레이터의 인자로는 리스트 데이터 타입으로 입력해야 한다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.serializers <span style=color:#ff79c6>import</span> ModelSerializer
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.decorators <span style=color:#ff79c6>import</span> api_view
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> user.models <span style=color:#ff79c6>import</span> Employee
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>@api_view([<span style=color:#f1fa8c>&#39;GET&#39;</span>])
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>employee_list</span>(request):
</span></span><span style=display:flex><span>	employee_qs <span style=color:#ff79c6>=</span> Employee<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>all() 
</span></span><span style=display:flex><span>	serializer <span style=color:#ff79c6>=</span> EmployeeSerializer(employee_qs, many<span style=color:#ff79c6>=</span><span style=color:#ff79c6>True</span>)
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>return</span> Response(serializer<span style=color:#ff79c6>.</span>data)
</span></span></code></pre></td></tr></table></div></div><p>🔆 url에 매핑하는 방식은 기존 FBV 방식과 동일하다.</p><p> </p><hr><h1 id=5-view-설계-viewset>5. View 설계: ViewSet<a hidden class=anchor aria-hidden=true href=#5-view-설계-viewset>#</a></h1><p>CBV 방식으로서, naming은 <code>class &lt;Model name>ViewSet(ModelViewSet):</code>로 한다.</p><ul><li>ModelViewSet을 받아서 ViewSet을 만든다.</li><li>이 때 2가지 옵션을 단다.<ul><li><code>queryset</code>, <code>serializer_class</code> 를 만든다.</li></ul></li><li>queryset 은 <code>&lt;모델명>.objects.all()</code> 을 만들어 할당한다.</li><li>serializer_class에 해당하는 건 <code>&lt;모델명>Serailizer</code>로 작성한다.</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># course/views.py </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.viewsets <span style=color:#ff79c6>import</span> ModelViewSet
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> .serialization <span style=color:#ff79c6>import</span> EmployeeSerializer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>EmployeeViewSet</span>(ModelViewSet):
</span></span><span style=display:flex><span>	queryset <span style=color:#ff79c6>=</span> Course<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>all() 
</span></span><span style=display:flex><span>	serializer_class <span style=color:#ff79c6>=</span> EmployeeSerializer 
</span></span></code></pre></td></tr></table></div></div><h2 id=url에-mapping-하기>url에 mapping 하기<a hidden class=anchor aria-hidden=true href=#url에-mapping-하기>#</a></h2><blockquote><p><strong><em>일반적인 cbv 방식과 달리 다음과 같이 DefaultRouter를 가져온다.</em></strong></p></blockquote><h3 id=router의-역할>Router의 역할<a hidden class=anchor aria-hidden=true href=#router의-역할>#</a></h3><ul><li><p>router는 nginx처럼 여러 군데로 보내는 역할을 수행한다.</p></li><li><p>router를 만들어서 여기에 <code>.register</code>를 사용하여 등록했다.</p></li><li><p>router가 ModelViewSet을 사용하여 url를 여러개 만들어주는 역할을 한다.</p><ul><li>url 뒤에 pk 입력하는 url 설계는 하지 않았음에도 불구하고, 뒤에 pk를 입력하면 해당되는 데이터가 뜬다.</li></ul></li><li><p>router.register의 수는 ModelViewSet으로 만들고 싶은 Model의 갯수만큼 입력한다.</p></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># users/views.py</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> django.urls <span style=color:#ff79c6>import</span> path, include
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> rest_framework.routers <span style=color:#ff79c6>import</span> DefaultRouter
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> .views <span style=color:#ff79c6>import</span> EmployeeViewSet
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>router <span style=color:#ff79c6>=</span> DefaultRouter() 
</span></span><span style=display:flex><span>router<span style=color:#ff79c6>.</span>register(<span style=color:#f1fa8c>&#39;employee&#39;</span>, EmployeeViewSet)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>urlpatterns <span style=color:#ff79c6>=</span> [
</span></span><span style=display:flex><span>	path(<span style=color:#f1fa8c>&#34;&#34;</span>, include(router<span style=color:#ff79c6>.</span>urls))
</span></span><span style=display:flex><span>]
</span></span></code></pre></td></tr></table></div></div><p> </p><hr><h1 id=6-자주-사용되는-view-설계>6. 자주 사용되는 view 설계<a hidden class=anchor aria-hidden=true href=#6-자주-사용되는-view-설계>#</a></h1><blockquote><p><strong><em>ViewSet보다 APIView를 훨씬 많이 사용한다.</em></strong></p></blockquote><ul><li><p>FormView를 잘 사용하지 않는 이유</p><ul><li>요구사항이 바껴서 적용하기 힘들 때, form에 post를 전달하는 것 대신에 Ajax로 API를 체크한다.</li></ul></li><li><p>ModelViewSet을 잘 사용하지 않는 이유: 최적화의 어려움</p><ul><li>ModelViewSet으로는 API를 자세하게 다룰 수 없어서, APIView를 주로 사용한다.</li><li>왜냐하면 ModelViewSet에는 CRUD가 다 존재하기 때문이다.</li></ul></li></ul><p> </p><hr><h1 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h1><ul><li><a href=https://learningspoons.com/course/detail/django-backend/>러닝스푼즈 - 나노디그리 Python & Django backed course</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://jeha00.github.io/tags/django/>Django</a></li></ul><nav class=paginav><a class=prev href=http://jeha00.github.io/post/aws/lecturenote01/><span class=title>« Prev Page</span><br><span>AWS study: DevOps란 무엇인가? & AWS를 배워야하는 이유</span></a>
<a class=next href=http://jeha00.github.io/post/project/devket/docs/why-pr-template/><span class=title>Next Page »</span><br><span>Project: Pull Request templates를 도입한 이유</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet on twitter" href="https://twitter.com/intent/tweet/?text=Django%20study%3a%20DRF%ec%9d%98%20API%20url%20%eb%a7%8c%eb%93%9c%eb%8a%94%20%eb%b0%a9%eb%b2%95%203%ea%b0%80%ec%a7%80%20-%20APIView%2c%20%40api_view%28%5b%5d%29%2c%20ModelViewSet&url=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdrf%2fdrf_study02%2f&hashtags=Django"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdrf%2fdrf_study02%2f&title=Django%20study%3a%20DRF%ec%9d%98%20API%20url%20%eb%a7%8c%eb%93%9c%eb%8a%94%20%eb%b0%a9%eb%b2%95%203%ea%b0%80%ec%a7%80%20-%20APIView%2c%20%40api_view%28%5b%5d%29%2c%20ModelViewSet&summary=Django%20study%3a%20DRF%ec%9d%98%20API%20url%20%eb%a7%8c%eb%93%9c%eb%8a%94%20%eb%b0%a9%eb%b2%95%203%ea%b0%80%ec%a7%80%20-%20APIView%2c%20%40api_view%28%5b%5d%29%2c%20ModelViewSet&source=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdrf%2fdrf_study02%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet on reddit" href="https://reddit.com/submit?url=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdrf%2fdrf_study02%2f&title=Django%20study%3a%20DRF%ec%9d%98%20API%20url%20%eb%a7%8c%eb%93%9c%eb%8a%94%20%eb%b0%a9%eb%b2%95%203%ea%b0%80%ec%a7%80%20-%20APIView%2c%20%40api_view%28%5b%5d%29%2c%20ModelViewSet"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdrf%2fdrf_study02%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet on whatsapp" href="https://api.whatsapp.com/send?text=Django%20study%3a%20DRF%ec%9d%98%20API%20url%20%eb%a7%8c%eb%93%9c%eb%8a%94%20%eb%b0%a9%eb%b2%95%203%ea%b0%80%ec%a7%80%20-%20APIView%2c%20%40api_view%28%5b%5d%29%2c%20ModelViewSet%20-%20http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdrf%2fdrf_study02%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Django study: DRF의 API url 만드는 방법 3가지 - APIView, @api_view([]), ModelViewSet on telegram" href="https://telegram.me/share/url?text=Django%20study%3a%20DRF%ec%9d%98%20API%20url%20%eb%a7%8c%eb%93%9c%eb%8a%94%20%eb%b0%a9%eb%b2%95%203%ea%b0%80%ec%a7%80%20-%20APIView%2c%20%40api_view%28%5b%5d%29%2c%20ModelViewSet&url=http%3a%2f%2fjeha00.github.io%2fpost%2fdjango%2fdrf%2fdrf_study02%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=http://jeha00.github.io/>Jeha DevLog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>