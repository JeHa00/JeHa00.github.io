<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[TIL] Network HTTP method use | Jeha00 DevLog</title><meta name=keywords content="TIL,Network,HTTP"><meta name=description content="HTTP method를 가지고 클라이언트가 서버에 어떻게 데이터를 전송하는지, 그리고 API 설계에는 무슨 종류가 있는지 알아본다."><meta name=author content><link rel=canonical href=http://jeha00.github.io/post/network/network_http_5/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.1e44d58192cbf6d7a4eb649bc43dbc3d4cc432677e5d8adc69b08c34cbe461ac.css integrity="sha256-HkTVgZLL9tek62SbxD28PUzEMmd+XYrcabCMNMvkYaw=" rel="preload stylesheet" as=style><link rel=icon href=http://jeha00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://jeha00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://jeha00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=http://jeha00.github.io/apple-touch-icon.png><link rel=mask-icon href=http://jeha00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="[TIL] Network HTTP method use"><meta property="og:description" content="HTTP method를 가지고 클라이언트가 서버에 어떻게 데이터를 전송하는지, 그리고 API 설계에는 무슨 종류가 있는지 알아본다."><meta property="og:type" content="article"><meta property="og:url" content="http://jeha00.github.io/post/network/network_http_5/"><meta property="og:image" content="http://jeha00.github.io/47"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-03-14T21:41:29+09:00"><meta property="article:modified_time" content="2022-03-14T21:41:29+09:00"><meta property="og:site_name" content="JeHa00 DevLog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://jeha00.github.io/47"><meta name=twitter:title content="[TIL] Network HTTP method use"><meta name=twitter:description content="HTTP method를 가지고 클라이언트가 서버에 어떻게 데이터를 전송하는지, 그리고 API 설계에는 무슨 종류가 있는지 알아본다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://jeha00.github.io/post/"},{"@type":"ListItem","position":2,"name":"[TIL] Network HTTP method use","item":"http://jeha00.github.io/post/network/network_http_5/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[TIL] Network HTTP method use","name":"[TIL] Network HTTP method use","description":"HTTP method를 가지고 클라이언트가 서버에 어떻게 데이터를 전송하는지, 그리고 API 설계에는 무슨 종류가 있는지 알아본다.","keywords":["TIL","Network","HTTP"],"articleBody":"0. Introduction HTTP 학습내용의 기본 출처: 김영한님의 모든 개발자를 위한 HTTP 웹 기본지식 강의를 듣고 정리한 내용과 모르는 부분에 대한 추가 내용을 합쳐 올린다. 이 강의는 HTTP에 대한 웹 기본지식을 설명하는 강의이므로, 내용이 간략할 수 있다. 학습 이유: 프레임워크를 사용하여 웹 개발을 배우기 전에, HTTP에 대해 기본적인 지식을 알고자 HTTP 공부를 시작한다. 이 강의에 대해 공부 후, 네트워크 전반에 대해 공부한다. 1. 클라이언트에서 서버로 데이터 전송 클라이언트에서 서버로 데이터를 전달하는 방식은 크게 2가지가 있다. 쿼리 파라미터를 통한 데이터 전송 GET을 많이 사용한다. 예) 주로 정렬 필터나 검색어를 사용할 때 쿼리 파라미터를 많이 사용한다. 메시지 바디를 통한 데이터 전송 POST, PUT, PATCH를 사용한다. 예) 회원 가입, 상품 주문, 리소스 등록, 리소스 변경하는데 사용한다. 그리고, 클라이언트가 서버로 데이터를 전송하는 4가지 상황이 있다. 각 상황에서 어떻게 클라이언트가 서버에 데이터를 전달하는지 알아보자. 1.1 정적 데이터 조회 예) 이미지, 정적 텍스트 문서 정적 데이터는 일반적으로 쿼리 파라미터 없이 GET method로 resource path만 적어, 단순하게 조회가 가능하다. 1.2 동적 데이터 조회 예) 주로 검색,게시판 목록에서 검색어를 사용하여 정렬 필터한다. (검색어) 조회 조건을 줄여주는 필터, 조회 결과를 정렬하는 정렬 조건에 주로 사용한다. 조회이기 때문에 GET 사용하지만, 정적 데이터가 아닌 동적 데이터이므로, 쿼리 파라미터를 사용해서 데이터를 클라이언트가 서버에게 넘겨줘야 한다. GET도 메세지 바디를 사용할 수 있지만, 지원하지 않는 경우가 많아서 사용하지 않는다. 1.3 HTML Form을 통한 데이터 전송 HTML Form 전송은 GET, POST만 지원한다. 예) 회원 가입, 상품 주문, 데이터 변경 POST 전송 - 저장 예) 회원 가입, 상품 주문, 데이터 변경 상황 전송 버튼을 누르면 웹 브라우저가 form 태그 정보를 읽어서, HTTP message를 생성한다. 그리고, action에 작성된 경로로 해당 method 요청을 보낸다. 쿼리 파라미터랑 동일한 형식으로 HTTP message body에 넣어 서버에 전송된다. username=kim\u0026age=20 GET 전송 - 저장 (오류) GET이라 메세지 바디를 안쓰기 때문에, url 경로에다가 data를 넣는다. 즉, Query parameter 형식으로 넣어준다. 또한, GET은 조회용으로만 사용가능하므로 저장하는 곳에 사용하면 안된다. GET은 조회이므로, /members 등으로 조회가 가능한 곳으로 보내야 정상적으로 처리된다. [결론]\nFORM에서 GET / POST의 사용에 맞춰서 웹 브라우저가 알아서 HTTP 요청 메세지의 구성을 Query 또는 Body 등으로 맞춰서 생성한다.\nmultipart/form-data 다른 종류의 여러 파일과 폼의 내용을 함께 전송이 가능해서 이름이 multipart다. 주로 binary data를 전송할 때 사용한다. 웹브라우저가 생성한 요청 HTTP 메시지의 content-type에 boundary 가 명시되어 있는데, form data 간 구분을 지어준다. 1.4. HTTP API를 통한 데이터 전송 HTML Form을 쓰지 않는 모든 상황을 말한다. 예) 회원 가입, 상품 주문, 데이터 변경에 사용 그러면 언제 사용하는가??? 서버 to 서버: 백엔드 시스템 통신 앱 클라이언트에서 전송 시 (아이폰,안드로이드) 웹 클라이언트에서 HTML Form 전송 대신 자바 스크립트를 통한 통신에 사용 (AJAX) 예)React, Vue.JS 같은 웹 클라이언트와 API 통신 POST, PUT,PATCH: 사용하며, 메시지 바디를 통해 데이터를 전송 GET: 조회, 쿼리 파라미터로 데이터를 전달 Content-type: application/json을 주로 사용 (사실상 표준) TEXT, XML, JSON 등등이 있지만, XML이 읽기 어렵고, 복잡해서 지금은 JSON을 사용한다. 데이터 크기도 상대적으로 XML보다 작아서, 사실상 JSON이 표준이다. 2. HTTP API 설계 HTTP API 설계에는 3가지 종류가 있다. HTTP API - collection POST 기반 등록 서버가 리소스 URI 결정 HTTP API - store PUT 기반 등록 클라이언트가 리소스 URI 결정 HTML FORM 사용 순수 HTML + HTML form 사용 GET, POST만 지원 이 3가지에 대해 각각 알아보자. 2.1 HTTP API - collection 서버가 새로 등록된 리소스 URI를 생성하고 관리하는 구조: Collection\n회원 관리 시스템: API 설계 - POST 기반 등록 회원 목록 /members -\u003e GET 회원 등록 /members -\u003e POST 회원 조회 /members/{id} -\u003e GET (회원 단권 조회) 회원 수정 /members/{id} -\u003e PATCH, PUT, POST 회원 삭제 /members/{id} -\u003e DELETE 실제로는 위의 경우처럼 명확하게 구분되지 않기 때문에, 컨트롤 URI 를 사용할 수 밖에 없다.\n클라이언트는 등록될 리소소의 URI를 모른다. 회원 등록 /members -\u003e POST POST /members 서버가 새로 등록된 리소스 URI를 생성한다. HTTP/1.1 201 Created\nLocation: /members/100 Collection 서버가 관리하는 리소스 디렉토리 서버가 리소스의 URI를 생성하고 관리 여기서 collection은 /members 2.2 HTTP API - store 클라이언트가 직접 resource uri를 지정하고, 관리하는 구조: Store\n파일 관리 시스템: API 설계 - PUT 기반 등록 파일 목록 /files -\u003e GET 파일 조회 /files/{filename} -\u003e GET 파일 등록 /files/{filename} -\u003e PUT 파일 삭제 /files/{filename} -\u003e DELETE 파일 대량 등록 /files -\u003e POST 파일 등록에 PUT을 썼기 때문에, 대량 등록에는 POST를 썼다. 왜냐하면 POST는 임의로 의미를 만들 수 있다. 클라이언트가 리소스 URI를 알고 있어야 한다. 파일 등록/files/{filename} -\u003e PUT PUT/files/star.jpg 클라이언트가 직접 리소스의 URI를 지정한다. Store 클라이언트가 관리하는 리소스 디렉토리 클라이언트가 리소스의 URI를 생성하고 관리 여기서 store는 /files 그럼 위 두 방식(Collection, Store) 중 무엇을 많이 사용할까??\n대부분 실무에서는 POST를 사용하는 Collection 구조를 사용한다. 하지만, file 관리의 경우, Store를 사용한다.\n2.2 HTML FORM 사용 회원 목록 /members -\u003e GET 회원 등록 폼 /members/new -\u003e GET 회원 등록 /members/new, /members -\u003e POST 위에 등록 폼과 같은 url을 쓰는 것을 추천한다. 회원 조회 /members/{id} -\u003e GET 회원 수정 폼 /members/{id}/edit -\u003e GET 실제로 수정일 일어나는 게 아니기 때문에, GET 을 사용한다. 회원 수정 /members/{id}/edit, /members/{id} -\u003e POST 위에 수정 폼과 같은 url을 쓰는 것을 추천한다. 회원 삭제 /members/{id}/delete -\u003e POST HTML FORM은 GET, POST만 지원 하므로 제약이 있다. 이런 제약을 해결하기 위해 동사로 된 리소스 경로를 사용한다. 최대한 리소스 개념을 가지고 사용하지만, 안될 때 대체제로 컨트롤 URI를 사용한다. AJAX 같은 기술을 사용해서 해결 가능하다 -\u003e 회원 API 참고 여기서는 순수 HTML, HTML FORM 이야기다. 3. 참고하면 좋은 URI 설계 개념 문서(document)\n단일 개념(파일 하나, 객체 인스턴스, 데이터베이스 row) 예) /members/100, /files/star.jpg 컬렉션(collection)\n서버가 관리하는 리소스 디렉터리 서버가 리소스의 URI를 생성하고 관리 예) /members 스토어(store)\n클라이언트가 관리하는 자원 저장소 클라이언트가 리소스의 URI를 알고 관리 예) /files 컨트롤러(controller), 컨트롤 URI\n문서, 컬렉션, 스토어로 해결하기 어려운 추가 프로세스 실행 동사를 직접 사용 예) /members/{id}/delete REST API를 보면 해결이 안되는 경우가 있다.\n그럴 때, 네 번째 개념인 컨트롤 URI가 꼭 있어야 한다.\n문서, collection, store 만으로 부족할 때, 컨트롤 URI 를 사용한다.\nhttps://restfulapi.net/resource-naming 참고하기 여러 사람들이 HTTP API를 하다보니, 좋은 practice가 있다. Reference 모든 개발자를 위한 HTTP 웹 기본지식 HTTP 메서드 활용 ","wordCount":"933","inLanguage":"en","datePublished":"2022-03-14T21:41:29+09:00","dateModified":"2022-03-14T21:41:29+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://jeha00.github.io/post/network/network_http_5/"},"publisher":{"@type":"Organization","name":"Jeha00 DevLog","logo":{"@type":"ImageObject","url":"http://jeha00.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://jeha00.github.io/ accesskey=h title="Jeha00 (Alt + H)">Jeha00</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=http://jeha00.github.io/about/ title=About><span>About</span></a></li><li><a href=http://jeha00.github.io/projects/ title=Project><span>Project</span></a></li><li><a href=http://jeha00.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=http://jeha00.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://jeha00.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://jeha00.github.io/>Home</a>&nbsp;»&nbsp;<a href=http://jeha00.github.io/post/>Posts</a></div><h1 class=post-title>[TIL] Network HTTP method use</h1><div class=post-meta><span title='2022-03-14 21:41:29 +0900 KST'>March 14, 2022</span>&nbsp;|&nbsp;<a href=https://github.com/JeHa00/blog/content/post/Network/Network_http_5.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#0-introduction aria-label="0. Introduction">0. Introduction</a></li><li><a href=#1-%ed%81%b4%eb%9d%bc%ec%9d%b4%ec%96%b8%ed%8a%b8%ec%97%90%ec%84%9c-%ec%84%9c%eb%b2%84%eb%a1%9c-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a0%84%ec%86%a1 aria-label="1. 클라이언트에서 서버로 데이터 전송">1. 클라이언트에서 서버로 데이터 전송</a></li><li><a href=#11-%ec%a0%95%ec%a0%81-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a1%b0%ed%9a%8c aria-label="1.1 정적 데이터 조회">1.1 정적 데이터 조회</a></li><li><a href=#12-%eb%8f%99%ec%a0%81-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a1%b0%ed%9a%8c aria-label="1.2 동적 데이터 조회">1.2 동적 데이터 조회</a></li><li><a href=#13-html-form%ec%9d%84-%ed%86%b5%ed%95%9c-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a0%84%ec%86%a1 aria-label="1.3 HTML Form을 통한 데이터 전송">1.3 HTML Form을 통한 데이터 전송</a><ul><li><a href=#post-%ec%a0%84%ec%86%a1---%ec%a0%80%ec%9e%a5 aria-label="POST 전송 - 저장">POST 전송 - 저장</a></li><li><a href=#get-%ec%a0%84%ec%86%a1---%ec%a0%80%ec%9e%a5-%ec%98%a4%eb%a5%98 aria-label="GET 전송 - 저장 (오류)">GET 전송 - 저장 (오류)</a></li><li><a href=#multipartform-data aria-label=multipart/form-data>multipart/form-data</a></li></ul></li><li><a href=#14-http-api%eb%a5%bc-%ed%86%b5%ed%95%9c-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a0%84%ec%86%a1 aria-label="1.4. HTTP API를 통한 데이터 전송">1.4. HTTP API를 통한 데이터 전송</a></li><li><a href=#2-http-api-%ec%84%a4%ea%b3%84 aria-label="2. HTTP API 설계">2. HTTP API 설계</a><ul><li><a href=#21-http-api---collection aria-label="2.1 HTTP API - collection">2.1 HTTP API - collection</a></li><li><a href=#22-http-api---store aria-label="2.2 HTTP API - store">2.2 HTTP API - store</a></li><li><a href=#22-html-form-%ec%82%ac%ec%9a%a9 aria-label="2.2 HTML FORM 사용">2.2 HTML FORM 사용</a></li></ul></li><li><a href=#3-%ec%b0%b8%ea%b3%a0%ed%95%98%eb%a9%b4-%ec%a2%8b%ec%9d%80-uri-%ec%84%a4%ea%b3%84-%ea%b0%9c%eb%85%90 aria-label="3. 참고하면 좋은 URI 설계 개념">3. 참고하면 좋은 URI 설계 개념</a></li><li><a href=#reference aria-label=Reference>Reference</a></li></ul></div></details></div><div class=post-content><h1 id=0-introduction>0. Introduction<a hidden class=anchor aria-hidden=true href=#0-introduction>#</a></h1><ul><li>HTTP 학습내용의 기본 출처: 김영한님의 <a href=https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC>모든 개발자를 위한 HTTP 웹 기본지식</a></li><li>강의를 듣고 정리한 내용과 모르는 부분에 대한 추가 내용을 합쳐 올린다.</li><li>이 강의는 HTTP에 대한 웹 기본지식을 설명하는 강의이므로, 내용이 간략할 수 있다.</li></ul><ul><li>학습 이유: 프레임워크를 사용하여 웹 개발을 배우기 전에, HTTP에 대해 기본적인 지식을 알고자 HTTP 공부를 시작한다. 이 강의에 대해 공부 후, 네트워크 전반에 대해 공부한다.</li></ul><h1 id=1-클라이언트에서-서버로-데이터-전송>1. 클라이언트에서 서버로 데이터 전송<a hidden class=anchor aria-hidden=true href=#1-클라이언트에서-서버로-데이터-전송>#</a></h1><ul><li>클라이언트에서 서버로 데이터를 전달하는 방식은 크게 2가지가 있다.<ul><li><strong>쿼리 파라미터를 통한 데이터 전송</strong><ul><li>GET을 많이 사용한다.</li><li>예) 주로 정렬 필터나 검색어를 사용할 때 쿼리 파라미터를 많이 사용한다.</li></ul></li><li><strong>메시지 바디를 통한 데이터 전송</strong><ul><li>POST, PUT, PATCH를 사용한다.</li><li>예) 회원 가입, 상품 주문, 리소스 등록, 리소스 변경하는데 사용한다.</li></ul></li></ul></li></ul><ul><li>그리고, 클라이언트가 서버로 데이터를 전송하는 4가지 상황이 있다. 각 상황에서 어떻게 클라이언트가 서버에 데이터를 전달하는지 알아보자.</li></ul><hr><h1 id=11-정적-데이터-조회>1.1 정적 데이터 조회<a hidden class=anchor aria-hidden=true href=#11-정적-데이터-조회>#</a></h1><ul><li>예) 이미지, 정적 텍스트 문서</li><li>정적 데이터는 일반적으로 쿼리 파라미터 없이 <code>GET</code> method로 <code>resource path만</code> 적어, 단순하게 조회가 가능하다.</li></ul><p><img loading=lazy src="https://oopy.lazyrockets.com/api/v2/notion/image?src=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2a0386de-df5f-430f-b267-3902b833591c%2FUntitled.png&blockId=f016c60e-0e24-4cf4-a24a-4643ab1ab4ab" alt=image></p><hr><h1 id=12-동적-데이터-조회>1.2 동적 데이터 조회<a hidden class=anchor aria-hidden=true href=#12-동적-데이터-조회>#</a></h1><ul><li>예) 주로 검색,게시판 목록에서 검색어를 사용하여 정렬 필터한다. (검색어)</li><li>조회 조건을 줄여주는 필터, 조회 결과를 정렬하는 정렬 조건에 주로 사용한다.</li><li>조회이기 때문에 <code>GET</code> 사용하지만, 정적 데이터가 아닌 동적 데이터이므로, <code>쿼리 파라미터를 사용</code>해서 데이터를 클라이언트가 서버에게 넘겨줘야 한다.</li><li>GET도 메세지 바디를 사용할 수 있지만, 지원하지 않는 경우가 많아서 사용하지 않는다.</li></ul><p><img loading=lazy src="https://oopy.lazyrockets.com/api/v2/notion/image?src=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F0082a8b8-b24d-41ed-81b9-ac485f67cfe0%2FUntitled.png&blockId=82858c8a-47aa-4adf-a1db-4ee739577065" alt=image></p><hr><h1 id=13-html-form을-통한-데이터-전송>1.3 HTML Form을 통한 데이터 전송<a hidden class=anchor aria-hidden=true href=#13-html-form을-통한-데이터-전송>#</a></h1><ul><li><strong>HTML Form 전송은 GET, POST만 지원한다.</strong></li><li>예) 회원 가입, 상품 주문, 데이터 변경</li></ul><h2 id=post-전송---저장>POST 전송 - 저장<a hidden class=anchor aria-hidden=true href=#post-전송---저장>#</a></h2><p><img loading=lazy src="https://oopy.lazyrockets.com/api/v2/notion/image?src=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa35eb384-0cd3-4fad-982c-1cd3f058d7a1%2FUntitled.png&blockId=9d2c7b8f-bde7-4bd4-b438-fe3924180f36" alt=image></p><ul><li>예) 회원 가입, 상품 주문, 데이터 변경 상황</li><li>전송 버튼을 누르면 웹 브라우저가 form 태그 정보를 읽어서, HTTP message를 생성한다. 그리고, action에 작성된 경로로 해당 method 요청을 보낸다.</li><li>쿼리 파라미터랑 동일한 형식으로 HTTP message body에 넣어 서버에 전송된다.<ul><li><code>username=kim&age=20</code></li></ul></li></ul><h2 id=get-전송---저장-오류>GET 전송 - 저장 (오류)<a hidden class=anchor aria-hidden=true href=#get-전송---저장-오류>#</a></h2><p><img loading=lazy src=https://media.vlpt.us/images/dnstlr2933/post/d7518bef-bada-4ad9-9702-1ad70ab6a883/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-01-07%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2012.18.02.png alt=image></p><ul><li>GET이라 메세지 바디를 안쓰기 때문에, url 경로에다가 data를 넣는다. 즉, Query parameter 형식으로 넣어준다.</li><li>또한, GET은 조회용으로만 사용가능하므로 저장하는 곳에 사용하면 안된다.</li><li>GET은 조회이므로, <code>/members</code> 등으로 조회가 가능한 곳으로 보내야 정상적으로 처리된다.</li></ul><blockquote><p>[결론]<br>FORM에서 GET / POST의 사용에 맞춰서 웹 브라우저가 알아서 <code>HTTP 요청 메세지</code>의 구성을 Query 또는 Body 등으로 맞춰서 생성한다.</p></blockquote><h2 id=multipartform-data>multipart/form-data<a hidden class=anchor aria-hidden=true href=#multipartform-data>#</a></h2><p><img loading=lazy src=https://media.vlpt.us/images/dnstlr2933/post/296861ed-bce7-431f-8e3c-13a0b0f73d18/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-01-09%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2010.16.57.png alt=image></p><ul><li>다른 종류의 여러 파일과 폼의 내용을 함께 전송이 가능해서 이름이 multipart다.</li><li>주로 binary data를 전송할 때 사용한다.</li><li>웹브라우저가 생성한 요청 HTTP 메시지의 content-type에 boundary 가 명시되어 있는데, form data 간 구분을 지어준다.</li></ul><hr><h1 id=14-http-api를-통한-데이터-전송>1.4. HTTP API를 통한 데이터 전송<a hidden class=anchor aria-hidden=true href=#14-http-api를-통한-데이터-전송>#</a></h1><ul><li>HTML Form을 쓰지 않는 모든 상황을 말한다.</li><li>예) 회원 가입, 상품 주문, 데이터 변경에 사용</li><li>그러면 언제 사용하는가???<ul><li>서버 to 서버: 백엔드 시스템 통신</li><li>앱 클라이언트에서 전송 시 (아이폰,안드로이드)</li><li>웹 클라이언트에서 HTML Form 전송 대신 자바 스크립트를 통한 통신에 사용 (AJAX)<ul><li>예)React, Vue.JS 같은 웹 클라이언트와 API 통신</li></ul></li></ul></li><li>POST, PUT,PATCH: 사용하며, 메시지 바디를 통해 데이터를 전송</li><li>GET: 조회, 쿼리 파라미터로 데이터를 전달</li><li>Content-type: application/json을 주로 사용 (사실상 표준)<ul><li>TEXT, XML, JSON 등등이 있지만, XML이 읽기 어렵고, 복잡해서 지금은 JSON을 사용한다. 데이터 크기도 상대적으로 XML보다 작아서, 사실상 JSON이 표준이다.</li></ul></li></ul><hr><h1 id=2-http-api-설계>2. HTTP API 설계<a hidden class=anchor aria-hidden=true href=#2-http-api-설계>#</a></h1><ul><li>HTTP API 설계에는 <strong>3가지 종류</strong>가 있다.<ul><li>HTTP API - <strong>collection</strong><ul><li><strong>POST 기반</strong> 등록</li><li><strong>서버가 리소스 URI 결정</strong></li></ul></li><li>HTTP API - <strong>store</strong><ul><li><strong>PUT 기반</strong> 등록</li><li><strong>클라이언트가 리소스 URI 결정</strong></li></ul></li><li>HTML FORM 사용<ul><li>순수 HTML + HTML form 사용</li><li>GET, POST만 지원</li></ul></li></ul></li></ul><ul><li>이 3가지에 대해 각각 알아보자.</li></ul><h2 id=21-http-api---collection>2.1 HTTP API - collection<a hidden class=anchor aria-hidden=true href=#21-http-api---collection>#</a></h2><blockquote><p><strong>서버가 새로 등록된 리소스 URI를 생성하고 관리하는 구조: Collection</strong></p></blockquote><ul><li>회원 관리 시스템: API 설계 - POST 기반 등록<ul><li>회원 목록 /members -> GET</li><li>회원 등록 /members -> POST</li><li>회원 조회 /members/{id} -> GET (회원 단권 조회)</li><li>회원 수정 /members/{id} -> PATCH, PUT, POST</li><li>회원 삭제 /members/{id} -> DELETE</li></ul></li></ul><blockquote><p>실제로는 위의 경우처럼 명확하게 구분되지 않기 때문에, <code>컨트롤 URI</code> 를 사용할 수 밖에 없다.</p></blockquote><ul><li>클라이언트는 등록될 리소소의 URI를 모른다.<ul><li>회원 등록 /members -> POST</li><li>POST /members</li></ul></li><li><em>서버가 새로 등록된 리소스 URI를 생성한다.</em><ul><li>HTTP/1.1 201 Created<br>Location: /members/100</li></ul></li><li><em>Collection</em><ul><li>서버가 관리하는 리소스 디렉토리</li><li>서버가 리소스의 URI를 생성하고 관리</li><li>여기서 collection은 /members</li></ul></li></ul><hr><h2 id=22-http-api---store>2.2 HTTP API - store<a hidden class=anchor aria-hidden=true href=#22-http-api---store>#</a></h2><blockquote><p><strong>클라이언트가 직접 resource uri를 지정하고, 관리하는 구조: Store</strong></p></blockquote><ul><li>파일 관리 시스템: API 설계 - PUT 기반 등록<ul><li>파일 목록 /files -> GET</li><li>파일 조회 /files/{filename} -> GET</li><li>파일 등록 /files/{filename} -> PUT</li><li>파일 삭제 /files/{filename} -> DELETE</li><li>파일 대량 등록 /files -> POST<ul><li>파일 등록에 PUT을 썼기 때문에, 대량 등록에는 POST를 썼다.</li><li>왜냐하면 POST는 임의로 의미를 만들 수 있다.</li></ul></li></ul></li></ul><ul><li>클라이언트가 리소스 URI를 알고 있어야 한다.<ul><li>파일 등록/files/{filename} -> PUT</li><li>PUT/files/star.jpg</li></ul></li><li><em>클라이언트가 직접 리소스의 URI를 지정한다.</em></li><li><em>Store</em><ul><li>클라이언트가 관리하는 리소스 디렉토리</li><li>클라이언트가 리소스의 URI를 생성하고 관리</li><li>여기서 store는 /files</li></ul></li></ul><blockquote><p>그럼 위 두 방식(Collection, Store) 중 무엇을 많이 사용할까??<br>대부분 실무에서는 POST를 사용하는 Collection 구조를 사용한다. 하지만, file 관리의 경우, Store를 사용한다.</p></blockquote><hr><h2 id=22-html-form-사용>2.2 HTML FORM 사용<a hidden class=anchor aria-hidden=true href=#22-html-form-사용>#</a></h2><ul><li>회원 목록 /members -> GET</li><li>회원 등록 폼 /members/new -> GET</li><li>회원 등록 /members/new, /members -> POST<ul><li>위에 등록 폼과 같은 url을 쓰는 것을 추천한다.</li></ul></li><li>회원 조회 /members/{id} -> GET</li><li>회원 수정 폼 /members/{id}/edit -> GET<ul><li>실제로 수정일 일어나는 게 아니기 때문에, GET 을 사용한다.</li></ul></li><li>회원 수정 /members/{id}/edit, /members/{id} -> POST<ul><li>위에 수정 폼과 같은 url을 쓰는 것을 추천한다.</li></ul></li><li>회원 삭제 /members/{id}/delete -> POST</li></ul><ul><li>HTML FORM은 <em>GET, POST만 지원</em> 하므로 제약이 있다.</li><li>이런 제약을 해결하기 위해 <code>동사로 된 리소스 경로</code>를 사용한다.<ul><li>최대한 리소스 개념을 가지고 사용하지만, 안될 때 대체제로 <code>컨트롤 URI</code>를 사용한다.</li></ul></li><li>AJAX 같은 기술을 사용해서 해결 가능하다 -> 회원 API 참고</li><li>여기서는 순수 HTML, HTML FORM 이야기다.</li></ul><hr><h1 id=3-참고하면-좋은-uri-설계-개념>3. 참고하면 좋은 URI 설계 개념<a hidden class=anchor aria-hidden=true href=#3-참고하면-좋은-uri-설계-개념>#</a></h1><ul><li><p><strong>문서(document)</strong></p><ul><li>단일 개념(파일 하나, 객체 인스턴스, 데이터베이스 row)</li><li>예) /members/100, /files/star.jpg</li></ul></li><li><p><strong>컬렉션(collection)</strong></p><ul><li>서버가 관리하는 리소스 디렉터리</li><li>서버가 리소스의 URI를 생성하고 관리</li><li>예) /members</li></ul></li><li><p><strong>스토어(store)</strong></p><ul><li>클라이언트가 관리하는 자원 저장소</li><li>클라이언트가 리소스의 URI를 알고 관리</li><li>예) /files</li></ul></li><li><p><strong>컨트롤러(controller), 컨트롤 URI</strong></p><ul><li>문서, 컬렉션, 스토어로 해결하기 어려운 추가 프로세스 실행</li><li>동사를 직접 사용</li><li>예) /members/{id}/delete</li></ul></li></ul><blockquote><p>REST API를 보면 해결이 안되는 경우가 있다.<br>그럴 때, 네 번째 개념인 <code>컨트롤 URI</code>가 꼭 있어야 한다.<br>문서, collection, store 만으로 부족할 때, <code>컨트롤 URI</code> 를 사용한다.</p></blockquote><ul><li><a href=https://restfulapi.net/resource-naming>https://restfulapi.net/resource-naming</a> 참고하기<ul><li>여러 사람들이 HTTP API를 하다보니, 좋은 practice가 있다.</li></ul></li></ul><hr><h1 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h1><ul><li><a href=https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC>모든 개발자를 위한 HTTP 웹 기본지식</a></li><li><a href=https://catsbi.oopy.io/e43388ef-bc41-4f44-986c-010c12b596dd>HTTP 메서드 활용</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://jeha00.github.io/tags/til/>TIL</a></li><li><a href=http://jeha00.github.io/tags/network/>Network</a></li><li><a href=http://jeha00.github.io/tags/http/>HTTP</a></li></ul><nav class=paginav><a class=prev href=http://jeha00.github.io/post/network/network_http_6/><span class=title>« Prev Page</span><br><span>[TIL] Network HTTP status</span></a>
<a class=next href=http://jeha00.github.io/post/python/python_basic_25_str_repr/><span class=title>Next Page »</span><br><span>[TIL] Python basic 25:
_
_str
_
_ vs
_
_repr
_
_</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share [TIL] Network HTTP method use on twitter" href="https://twitter.com/intent/tweet/?text=%5bTIL%5d%20Network%20HTTP%20method%20use&url=http%3a%2f%2fjeha00.github.io%2fpost%2fnetwork%2fnetwork_http_5%2f&hashtags=TIL%2cNetwork%2cHTTP"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [TIL] Network HTTP method use on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fjeha00.github.io%2fpost%2fnetwork%2fnetwork_http_5%2f&title=%5bTIL%5d%20Network%20HTTP%20method%20use&summary=%5bTIL%5d%20Network%20HTTP%20method%20use&source=http%3a%2f%2fjeha00.github.io%2fpost%2fnetwork%2fnetwork_http_5%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [TIL] Network HTTP method use on reddit" href="https://reddit.com/submit?url=http%3a%2f%2fjeha00.github.io%2fpost%2fnetwork%2fnetwork_http_5%2f&title=%5bTIL%5d%20Network%20HTTP%20method%20use"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [TIL] Network HTTP method use on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2fjeha00.github.io%2fpost%2fnetwork%2fnetwork_http_5%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [TIL] Network HTTP method use on whatsapp" href="https://api.whatsapp.com/send?text=%5bTIL%5d%20Network%20HTTP%20method%20use%20-%20http%3a%2f%2fjeha00.github.io%2fpost%2fnetwork%2fnetwork_http_5%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [TIL] Network HTTP method use on telegram" href="https://telegram.me/share/url?text=%5bTIL%5d%20Network%20HTTP%20method%20use&url=http%3a%2f%2fjeha00.github.io%2fpost%2fnetwork%2fnetwork_http_5%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=http://jeha00.github.io/>Jeha00 DevLog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>